[
  {
    "objectID": "research.html",
    "href": "research.html",
    "title": "News & Activities",
    "section": "",
    "text": "‚ÄúThe impact of Choosing WiselyTM recommendations and insurance coverage restrictions on the provision of low-value care: an interrupted time series analysis of vitamin D tests‚Äù published in BMC Health Services Research\nRead Study | Check my summary blog post (with cool graphs!)\n\n\n\n\nClinical recommendations alone are insufficient to reduce low-value care in the case of Vit D tests. Insurance coverage restrictions proved more effective than guidelines, reducing unnecessary vitamin D testing by 62% and saving 15.65 million CHF annually. However, coverage restrictions increase administrative burden and risk underuse.\n\n\n\n\n\nOur research on reducing unnecessary vitamin D testing has been featured in the ‚ÄúSonntagszeitung‚Äù (pdf version) and the ‚ÄúTages Anzeiger‚Äù (pdf version)"
  },
  {
    "objectID": "research.html#latest-news",
    "href": "research.html#latest-news",
    "title": "News & Activities",
    "section": "",
    "text": "‚ÄúThe impact of Choosing WiselyTM recommendations and insurance coverage restrictions on the provision of low-value care: an interrupted time series analysis of vitamin D tests‚Äù published in BMC Health Services Research\nRead Study | Check my summary blog post (with cool graphs!)\n\n\n\n\nClinical recommendations alone are insufficient to reduce low-value care in the case of Vit D tests. Insurance coverage restrictions proved more effective than guidelines, reducing unnecessary vitamin D testing by 62% and saving 15.65 million CHF annually. However, coverage restrictions increase administrative burden and risk underuse.\n\n\n\n\n\nOur research on reducing unnecessary vitamin D testing has been featured in the ‚ÄúSonntagszeitung‚Äù (pdf version) and the ‚ÄúTages Anzeiger‚Äù (pdf version)"
  },
  {
    "objectID": "research.html#complete-academic-record",
    "href": "research.html#complete-academic-record",
    "title": "News & Activities",
    "section": "Complete Academic Record",
    "text": "Complete Academic Record\nFor a comprehensive list of publications and citations, visit my Google Scholar profile."
  },
  {
    "objectID": "posts/blog2/StravaArt.html",
    "href": "posts/blog2/StravaArt.html",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "",
    "text": "In 2025, I spent 322h biking around the countryside. In comparison to the time I spent working, teaching, or handling everyday family tasks, this is not a lot. But time spent biking (and also running) has a special quality to it. It is time outside, alone or with friends, an immediate and physical experience of speed, distance, and calm. This experience contrasts with my screen-based work, and has become a central element of balance and peace of mind in my life.\nI ride to clear my head, to stay fit, to find new roads. And I record those rides on Strava. As a data visualization afficionado, I like to visualize my rides on maps. Seeing on maps how biking allowed me to discover new places and new roads over time gives me a deep feeling of freedom and excitement for future adventures.\nIn this blog, I created an artistic map that traces my bike rides and my runs since 2021. It shows with lines the meandering of my sport. The map displays the evolution over time and conveys this sense of unframed freedom and unlimited possibilities.\n\n\n\nFor each year, my biking activities are drawn on the map. I chose a facetted map with the cumulated activities over year to display the evolution. Letting activities grow outside the frame gives a sense of boundless exploration. The focus of the design is on activities, not on the map itself: for this reason, the roads and geographical elements are minimal to highlight the rides. If you know Eastern Switzerland, you‚Äôll recognize Lake Constance, and Lake Z√ºrich. For bikers here, you‚Äôll notice the Gold Tour of the Alpenbrevet appearing in 2024."
  },
  {
    "objectID": "posts/blog2/StravaArt.html#representing-my-biking-in-an-artistic-way",
    "href": "posts/blog2/StravaArt.html#representing-my-biking-in-an-artistic-way",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "",
    "text": "In 2025, I spent 322h biking around the countryside. In comparison to the time I spent working, teaching, or handling everyday family tasks, this is not a lot. But time spent biking (and also running) has a special quality to it. It is time outside, alone or with friends, an immediate and physical experience of speed, distance, and calm. This experience contrasts with my screen-based work, and has become a central element of balance and peace of mind in my life.\nI ride to clear my head, to stay fit, to find new roads. And I record those rides on Strava. As a data visualization afficionado, I like to visualize my rides on maps. Seeing on maps how biking allowed me to discover new places and new roads over time gives me a deep feeling of freedom and excitement for future adventures.\nIn this blog, I created an artistic map that traces my bike rides and my runs since 2021. It shows with lines the meandering of my sport. The map displays the evolution over time and conveys this sense of unframed freedom and unlimited possibilities.\n\n\n\nFor each year, my biking activities are drawn on the map. I chose a facetted map with the cumulated activities over year to display the evolution. Letting activities grow outside the frame gives a sense of boundless exploration. The focus of the design is on activities, not on the map itself: for this reason, the roads and geographical elements are minimal to highlight the rides. If you know Eastern Switzerland, you‚Äôll recognize Lake Constance, and Lake Z√ºrich. For bikers here, you‚Äôll notice the Gold Tour of the Alpenbrevet appearing in 2024."
  },
  {
    "objectID": "posts/blog2/StravaArt.html#how-to-do-strava-map-art-with-r",
    "href": "posts/blog2/StravaArt.html#how-to-do-strava-map-art-with-r",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "How to: do Strava map art with R",
    "text": "How to: do Strava map art with R\nThis map is a nice excuse to play with the Strava API, Open Street Maps, R, ggplot, and my favorite color tones. Here is a step-by-step explanation on how I coded the map. The full commented code is also available directly in this blog.\n\nStep 1: Set up R\nFirst, install and load the necessary libraries. I use the rStrava package to connect to the Strava API and download my activities, and osmdata + ggplot2 to visualize them on OpenStreetMap. Fonts are added using showtext.\n\n\nShow R code for package loading\n# Strava API wrapper\nlibrary(rStrava)\n\n# OpenStreetMap and sf for polygons\nlibrary(osmdata)\nlibrary(sf)\nlibrary(googleway) # Convert polygons from Rstrava to sf\n\n# Standard tidyverse\nlibrary(readr)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Add fonts for my graphs\nlibrary(showtext)\nfont_add_google(\"Fira Sans\", \"Fira Sans\")  \nfont_add_google(\"Bebas Neue\", \"Bebas Neue\")\nshowtext_auto()\n\n\n¬†\n\n\nStep 2: Get the data from Strava using the rStrava API wrapper\nI followed the rStrava vignette to authenticate with the API and access my activities. I extract my activities, keep only rides and runs, and save them as CSVs to avoid re-downloading every time. The activity data includes a compressed polyline (Google format) with GPS coordinates. I decode them into usable line geometries to visualize the actual paths of each activity.\nIn a second step, I use decode_pl() to extract the GPS coordinates from each activity‚Äôs polyline. Then I convert them to LINESTRING geometries ‚Äî after all, rides are linear paths, and Strava doesn‚Äôt know random walks üò¨ü•Å.\n\n\nShow R code for interaction with the Strava API\n# Check if I already downloaded and saved my activities. If not, connect \n# to the API and extract data. \nstrava_file &lt;- here::here(\"posts/blog2_strava/cache/strava_run.csv\")\n\nif (!file.exists(strava_file)) {\n\n    app_name      &lt;- Sys.getenv(\"STRAVA_APP_NAME\")\n    app_client_id &lt;- Sys.getenv(\"STRAVA_CLIENT_ID\")\n    app_secret    &lt;- Sys.getenv(\"STRAVA_CLIENT_SECRET\")\n\n    stopifnot(nzchar(app_client_id), nzchar(app_secret))\n\n    # create the authentication token\n    stoken &lt;- httr::config(\n      token = strava_oauth(\n        app_name, \n        app_client_id, \n        app_secret, \n        app_scope=\"activity:read_all\")\n      )\n\n    # get activities by date range\n    my_acts &lt;- get_activity_list(stoken, after = as.Date('2021-01-01'))\n    act_data &lt;- compile_activities(my_acts, units = \"metric\") \n\n    # Prepare data\n    my_acts &lt;- act_data |&gt;\n      select(\n        id, start_date, type, name, lat = start_latlng1, lng = start_latlng2, \n        map.summary_polyline\n      ) |&gt;\n      filter(type %in% c(\"Run\", \"Ride\")) \n\n    count(my_acts, type)\n\n    # Save data per activity\n    filter(my_acts, type == \"Run\") |&gt;\n        write_csv(here::here(\"posts/blog2_strava/cache/strava_run.csv\"))\n    filter(my_acts, type == \"Ride\") |&gt;\n        write_csv(here::here(\"posts/blog2_strava/cache/strava_ride.csv\"))\n\n} else {\n    my_acts &lt;- bind_rows(\n        read_csv(here::here(\"posts/blog2_strava/cache/strava_run.csv\")),\n        read_csv(here::here(\"posts/blog2_strava/cache/strava_ride.csv\"))\n    )\n}\n\n\n\n\nShow R code for activity preparation\n# Import polygons using a custom function\nmake_lines_sf &lt;- function(df) {\n  \n  # Initialize new vector for results\n  res &lt;- vector(\"list\", nrow(df))\n\n  # Control flow\n  for (j in seq_len(nrow(df))) {\n\n    coords &lt;- tryCatch(\n      googleway::decode_pl(df$map.summary_polyline[j]),\n      error = function(e) NULL\n    )\n    if (is.null(coords)) next\n\n    coords &lt;- coords |&gt; \n        filter(!is.na(lat), !is.na(lon))\n    \n    if (nrow(coords) &lt; 2) next\n\n    # Transform to lines\n    ls &lt;- st_linestring(as.matrix(coords[, c(\"lon\", \"lat\")]))\n\n    # Store\n    res[[j]] &lt;- st_sf(\n      id = df$id[j],\n      type = as.character(df$type[j]),\n      geometry = st_sfc(ls, crs = 4326)\n    )\n  }\n\n  out &lt;- do.call(rbind, res[!vapply(res, is.null, logical(1))])\n  out\n}\n\nmy_acts &lt;- my_acts |&gt; \n  mutate(year = lubridate::year(start_date))\n\nacts_lines &lt;- make_lines_sf(my_acts) |&gt;\n  mutate(year = my_acts$year)\n\n\n\n\n\n\nStep 3: Create a map with all running and biking activities in 2025\nMy first map will be used as a post on Strava to wish my community a happy 2026.\nAs the basic structure of the map, I define a bounding box for Eastern Switzerland (from Z√ºrich to Bregenz, Konstanz to Luzern). That‚Äôs where most of my activities take place. I went biking and running in Western Switzerland and Spain, which I will not show on the map. I extract the main roads from OpenStreetMap using add_osm_feature()and cache them to a .gpkg file to avoid re-downloading.\nOnce the activities and the map have been prepared, use ggplot() and geom_sf to plot the map rectangle, the street lines, and the activities. I chose among two favorite color palettes to display the map in a nice artistic way. I also chose a font that I thought would go well with the overall design.\n\n\n\n\n\nShow R code for the map and street preparation\n# We create a rectangle around Eastern Switzerland\nbb_rect &lt;- st_as_sfc(st_bbox(c(\n  xmin = 8, xmax = 9.7,\n  ymin = 46.75, ymax = 47.85\n), crs = 4326))\n\n\n# We extract the street polygons from OpenStreetMap\nroads_file &lt;- here::here(\"posts/blog2_strava/cache/roads.gpkg\")\n\nif (!file.exists(roads_file)) {\n\n  streets &lt;- opq(st_bbox(bb_rect)) |&gt;\n    add_osm_feature(\n      key = \"highway\",\n      value = c(\"motorway\", \"primary\", \"secondary\", \"tertiary\")\n    ) |&gt;\n    osmdata_sf()\n\n  streets_lines &lt;- streets$osm_lines\n\n  dir.create(dirname(roads_file), showWarnings = FALSE, recursive = TRUE)\n\n  sf::st_write(\n    streets_lines,\n    roads_file,\n    layer = \"roads\",\n    delete_layer = TRUE,\n    quiet = TRUE\n  )\n\n} else {\n\n  streets_lines &lt;- sf::st_read(\n    roads_file,\n    layer = \"roads\",\n    quiet = TRUE\n  )\n\n}\n\n# I don't restrict the rectangle as much for the activity maps. I like the effect it has when the activities extend to the margins.\nrect &lt;- st_as_sfc(st_bbox(c(\n  xmin = 7.9, xmax = 9.8,\n  ymin = 46.7, ymax = 47.9\n), crs = 4326))\n\nacts_lines &lt;- acts_lines[st_intersects(acts_lines, rect, sparse = FALSE), ]\nacts_lines_bike &lt;- filter(acts_lines, type == \"Ride\")\nacts_lines_runbike_2025 &lt;- filter(acts_lines, year == 2025)\n\n\n\n\nShow R code for color palette definition\n# Choose between two color palettes\nget_palette_colors &lt;- function(palette = c(\"purple\", \"cherry\")) {\n  palette &lt;- match.arg(palette)\n\n  if (palette == \"purple\") {\n    list(\n      background = \"#573b88\",\n      roads      = \"#9b73a9\",\n      rides      = \"#ffffff\"\n    )\n  } else {\n    list(\n      background = \"#3B0A0A\",\n      roads      = \"#663c1bff\",\n      rides      = \"#FFF8DC\"\n    )\n  }\n}\n\n\n\n\nShow R code for the map\n# Define colors\ncolors1 &lt;- get_palette_colors(\"cherry\")\ncolor_background &lt;- colors1$background\ncolor_roads      &lt;- colors1$roads\ncolor_rides      &lt;- colors1$rides\n\n# Create the base map\nbase_map_bike &lt;- ggplot() +\n  geom_sf(data = bb_rect, fill = color_background, color = NA) +\n  geom_sf(data = streets_lines, color = color_roads, linewidth = 0.1) +\n  coord_sf(expand = FALSE) +\n  labs(\n    title = paste0(\n      \"&lt;span style='font-family:Fira Sans;font-size:20pt;'&gt;After drawing so many new lines on the 2025 map,&lt;/span&gt;&lt;br&gt;\",\n      \"&lt;span style='font-size:48pt;'&gt;Happy 2026!&lt;/span&gt;\"\n    ),\n    subtitle = \"Full of km, watts, unseen places, and joyful discoveries!\",\n    caption = \"Data: Strava ‚Ä¢ Map: OpenStreetMap ‚Ä¢ Author: Aur√©lien Sallin\"\n  ) +\n  theme_void() +\n  theme(\n    text = element_text(family = \"Bebas Neue\", color = color_rides),\n    plot.background = element_rect(fill = color_background, color = NA),\n    plot.margin = margin(t = 1, r = 10, b = 1, l = 10, unit = \"pt\"),\n    legend.position = \"none\",\n    plot.title = ggtext::element_markdown(\n      family = \"Bebas Neue\", size = 36, color = \"white\", hjust = 0.5,\n      lineheight = 0.7  \n    ),\n    plot.subtitle = ggtext::element_markdown(\n      family = \"Fira Sans\", size = 20, color = \"white\", hjust = 0.5,\n      margin = margin(t = 10)  \n    ),\n    plot.caption = element_text(\n      family = \"Fira Sans\", size = 16, color = \"white\", hjust = 0.95\n    )\n  )\n\n# Add the activity geometries\nmap_2025 &lt;- base_map_bike +\n  geom_sf(data = acts_lines_runbike_2025, color = color_rides, linewidth = 0.5, alpha = 0.5)"
  },
  {
    "objectID": "posts/blog2/StravaArt.html#mapping-the-journey-year-by-year",
    "href": "posts/blog2/StravaArt.html#mapping-the-journey-year-by-year",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "Mapping the journey: year by year",
    "text": "Mapping the journey: year by year\n\nStep 4: The final map: evolution of my rides over time\nI restrict the activities to biking only, and create a dataset containing the cumulated activities over the years. I use facetting to show how the map evolved year by year.\n\n\nShow R code for the activity preparation\n# Filter on bike activities and extract the year of the activity\nmy_acts &lt;- my_acts |&gt; \n  filter(type == \"Ride\") |&gt; \n  mutate(year = lubridate::year(start_date))\n\nyears &lt;- sort(unique(my_acts$year))\n\n# Cumulate activities\ncumulative_sf_list &lt;- list()\n\n# For each year, include all rides up to that year (cumulative map)\nfor (y in years) {\n  # Filter all rides up to and including year y\n  df_cum &lt;- my_acts |&gt; \n    filter(year &lt;= y)\n\n  # Convert to sf LINESTRINGs using the function I created above\n  sf_lines &lt;- make_lines_sf(df_cum)\n  sf_lines$year_facet &lt;- as.character(y)  # For facetting in the graph\n\n  cumulative_sf_list[[as.character(y)]] &lt;- sf_lines\n}\n\n# Combine into single sf object\ncumulative_rides &lt;- do.call(rbind, cumulative_sf_list)\ncumulative_rides &lt;- cumulative_rides[st_intersects(cumulative_rides, rect, sparse = FALSE), ]\n\n\n\n\nShow R code for the map\nmap_peryear &lt;- ggplot() +\n  geom_sf(data = bb_rect, fill = color_background, color = NA) +\n  geom_sf(data = streets_lines,  color = color_roads, linewidth = 0.1) +\n  coord_sf(expand = FALSE) +\n  geom_sf(data = cumulative_rides, color = color_rides, linewidth = 0.6, alpha = 0.4) +\n  facet_grid(~ year_facet) +\n  labs(\n    caption = \"\\nFive Years in the Saddle ‚Ä¢ Data: Strava ‚Ä¢ Map: OpenStreetMap ‚Ä¢ Author: Aur√©lien Sallin\"\n    ) +\n  theme_void() +\n  theme(\n    panel.background = element_rect(fill = color_background),\n    plot.background = element_rect(fill = color_background),\n    legend.position = \"none\",\n    panel.spacing = unit(0.5, \"lines\"),\n    plot.title = element_text(\n      family = \"Bebas Neue\", size = 60, color = \"white\", hjust = 0.5\n    ),\n    plot.subtitle = element_text(\n      family = \"Fira Sans\", size = 12, color = \"white\", hjust = 0.5\n    ),\n    plot.caption = element_text(\n      family = \"Fira Sans\", size = 28, color = \"white\", hjust = 0.95\n    ),\n    strip.text = element_text(\n      family = \"Bebas Neue\", size = 56, face = \"bold\", color = \"white\"\n    )\n  )"
  },
  {
    "objectID": "posts/blog2/StravaArt.html#if-its-not-on-strava-it-didnt-happen---also-in-2026",
    "href": "posts/blog2/StravaArt.html#if-its-not-on-strava-it-didnt-happen---also-in-2026",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "If it‚Äôs not on Strava, it didn‚Äôt happen - also in 2026",
    "text": "If it‚Äôs not on Strava, it didn‚Äôt happen - also in 2026\nFirst of all, as the saying goes, if it‚Äôs not on Strava, it didn‚Äôt happen. Now you have living proof that the metaphysical importance of Strava entries has real-life consequences.\n\n\n\nSecond, making beautiful maps from Strava activities brings exactly the sense of satisfaction and achievement we seek around the new year. With the cold outside, spending extra time coding was quite rewarding. Take care and happy 2026!"
  },
  {
    "objectID": "posts/blog2/StravaArt.html#references",
    "href": "posts/blog2/StravaArt.html#references",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "References",
    "text": "References\nThanks for inspiration from Sarah Van Alsten, Sam Shanny-Csik, and Bernhard Bieri for the very nice-looking maps using Open Street Maps."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Welcome!",
    "section": "",
    "text": "As an economist and data scientist at a major Swiss healthcare organization, I work with claims data to generate value for our healthcare system, our clients, and our provider partners. I teach data science at the University of St.¬†Gallen on the side.\nMy passion lies in turning data into insight through numbers, simulations, models, and impactful visualizations. When I‚Äôm not coding, I‚Äôm probably running, biking, doing politics for my township, or cooking.\nFeel free to get in touch using my contact info.\n \n    \n  \n    \n     Github\n  \n  \n    \n     LinkedIn\n  \n  \n    \n     Email"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Aur√©lien Sallin",
    "section": "",
    "text": "I am a Senior Economist/Data Scientist in the Health Services Management Team of one of the largest health insurance companies in Switzerland. My interest lies in the strategic, data-driven development of alternative financing models and the implementation of Value-Based Healthcare approaches.\nMy role includes conceptualizing and conducting statistical analyses based on claims data, leading departmental projects on healthcare financing, and using data to monitor costs, evaluate our interventions, and generate value for our insurees. This includes applying methods such as causal machine learning and quasi-experimental designs. I have presented our research at over ten national and international conferences in health economics, statistics, and population research.\nBefore, I was an Economics researcher at the Swiss Institute for Empirical Economic Research (SEW) at the University of St.¬†Gallen (2017-2022), where I led projects in education economics and applied econometrics. I published some work on gifted students and their positive effects on their peers."
  },
  {
    "objectID": "about.html#data-science-and-economics",
    "href": "about.html#data-science-and-economics",
    "title": "Aur√©lien Sallin",
    "section": "",
    "text": "I am a Senior Economist/Data Scientist in the Health Services Management Team of one of the largest health insurance companies in Switzerland. My interest lies in the strategic, data-driven development of alternative financing models and the implementation of Value-Based Healthcare approaches.\nMy role includes conceptualizing and conducting statistical analyses based on claims data, leading departmental projects on healthcare financing, and using data to monitor costs, evaluate our interventions, and generate value for our insurees. This includes applying methods such as causal machine learning and quasi-experimental designs. I have presented our research at over ten national and international conferences in health economics, statistics, and population research.\nBefore, I was an Economics researcher at the Swiss Institute for Empirical Economic Research (SEW) at the University of St.¬†Gallen (2017-2022), where I led projects in education economics and applied econometrics. I published some work on gifted students and their positive effects on their peers."
  },
  {
    "objectID": "about.html#teaching",
    "href": "about.html#teaching",
    "title": "Aur√©lien Sallin",
    "section": "Teaching",
    "text": "Teaching\nSince 2023, I have been teaching introductory data science with R, and since 2026, programming for undergraduate economists at the University of St.¬†Gallen. I focus on making statistical concepts accessible and helping students develop practical skills for their future careers in data science, economics, and related fields."
  },
  {
    "objectID": "about.html#other-interests",
    "href": "about.html#other-interests",
    "title": "Aur√©lien Sallin",
    "section": "Other interests",
    "text": "Other interests\nWhen I‚Äôm not analyzing data or teaching, I‚Äôm likely outdoors, running and biking in the Swiss Alps. I‚Äôm also passionate about civic engagement and the R community. Since 2023, I‚Äôve been a co-organizer of the Z√ºrich R User Group. In 2024, I was elected to the audit commission of the municipality of Flawil, where I contribute to local democratic oversight."
  },
  {
    "objectID": "posts/2025-06-07-blog1/scroll.html",
    "href": "posts/2025-06-07-blog1/scroll.html",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(readr)\nlibrary(qs)\n\ndataGraph &lt;- qread(\"data/dataGraph.qs\")\ndfgraph &lt;- dataGraph$dfGraph_long\ncounterfactualM &lt;- dataGraph$counterfactual_long\nout &lt;- dataGraph$out\ndfgraph &lt;- rename(dfgraph, \"y\" = y1_)\n\nplot_vitd_masked &lt;- function(\n    dfgraph,\n    counterfactualM,\n    mask_from = NULL,\n    mask_counterfactual_from = NULL,\n    x = 0.8\n) {\n    # Filter data based on mask_from parameter instead of using rectangles\n    dfgraph_filtered &lt;- if (!is.null(mask_from)) {\n        subset(dfgraph, time &lt;= mask_from)\n    } else {\n        dfgraph\n    }\n\n    # Create counterfactual dataframe\n    counterfactual_df &lt;- data.frame(\n        time = dfgraph$time,\n        counterfactual = counterfactualM\n    )\n\n    # Filter counterfactual data if needed\n    if (!is.null(mask_counterfactual_from)) {\n        counterfactual_df &lt;- subset(counterfactual_df, time &lt;= mask_counterfactual_from)\n    }\n\n    # Filter counterfactual by mask_from as well\n    if (!is.null(mask_from)) {\n        counterfactual_df &lt;- subset(counterfactual_df, time &lt;= mask_from)\n    }\n\n    p &lt;- ggplot(dfgraph, aes(y = y * 100, x = time)) +\n        geom_line(\n            data = dfgraph_filtered,\n            aes(\n                color = \"Observed\",\n                size = \"Observed\",\n                linetype = \"Observed\"\n            )\n        ) +\n        geom_line(\n            data = counterfactual_df,\n            aes(\n                y = counterfactual * 100,\n                color = \"Counterfactual\",\n                size = \"Counterfactual\",\n                linetype = \"Counterfactual\"\n            )\n        ) +\n        geom_line(\n            data = subset(dfgraph_filtered, time &lt;= 0),\n            aes(\n                y = pred * 100,\n                color = \"Predicted\",\n                size = \"Predicted\",\n                linetype = \"Predicted\"\n            )\n        ) +\n        geom_line(\n            data = subset(dfgraph_filtered, time &gt;= 0),\n            aes(\n                y = pred * 100,\n                color = \"Predicted\",\n                size = \"Predicted\",\n                linetype = \"Predicted\"\n            )\n        ) +\n\n        scale_linetype_manual(\n            name = \"\",\n            values = c(\"Observed\" = 1, \"Predicted\" = 1, \"Counterfactual\" = 4)\n        ) +\n        scale_size_manual(\n            name = \"\",\n            values = c(\n                \"Observed\" = x * 0.8,\n                \"Predicted\" = x * 1,\n                \"Counterfactual\" = x * 1.25\n            )\n        ) +\n        scale_color_manual(\n            name = \"\",\n            values = c(\n                \"Observed\" = \"grey40\",\n                \"Predicted\" = \"#E22920\",\n                \"Counterfactual\" = \"#01BBA8\"\n            )\n        ) +\n        scale_x_continuous(\n            limits = c(-50, 18),\n            breaks = c(-50, -39, -27, -15, -3, 0, 9, 15, 21) - 15,\n            labels = c(\n                \"Jan.\\n2017\",\n                \"Jan.\\n2018\",\n                \"Jan.\\n2019\",\n                \"Jan.\\n2020\",\n                \"Jan.\\n2021\",\n                \"Apr.\\n2021\",\n                \"Jan.\\n2022\",\n                \"Jun.\\n2022\",\n                \"Jan.\\n2023\"\n            )\n        ) +\n        scale_y_continuous(\n            limits = c(1.5, 7),\n            breaks = seq(2, 7, 1)\n        ) +\n        annotate(\n            \"rect\",\n            xmin = -28,\n            xmax = -24,\n            ymin = -Inf,\n            ymax = Inf,\n            alpha = 0.1,\n            fill = \"#00857C\"\n        ) +\n        geom_text(\n            aes(x = -26, y = 1.8, label = \"COVID19 \\nLockdown\"),\n            color = \"#00857C\",\n            size = x * 3\n        ) +\n        labs(\n            y = \"Monthly Vitamin D test prescriptions per 100 consultations\",\n            x = NULL\n        ) +\n        theme_classic() +\n        theme(\n            plot.background = element_rect(fill = \"#F5F5F5\", color = NA),\n            panel.background = element_rect(fill = \"#F5F5F5\", color = NA),\n            legend.background = element_rect(fill = \"#EEEEEE\"),\n            legend.position = \"bottom\",\n            panel.grid.major.x = element_line(color = \"white\"),\n            panel.grid.major.y = element_line(color = \"white\"),\n            axis.text.x = element_text(size = x * 10),\n            axis.text.y = element_text(size = x * 10),\n            axis.title = element_text(size = x * 11),\n            legend.text = element_text(size = x * 10)\n        )\n\n    # Add vertical lines conditionally based on data support\n    # Only add vline if the x-intercept is within the data range (mask_from)\n    if (is.null(mask_from) || mask_from &gt;= -15) {\n        p &lt;- p + geom_vline(\n            xintercept = -15,\n            color = \"#E22920\",\n            lty = 20,\n            linewidth = x * 1.5\n        )\n    }\n\n    if (is.null(mask_from) || mask_from &gt;= 0) {\n        p &lt;- p + geom_vline(\n            xintercept = 0,\n            color = \"#675482\",\n            lty = 20,\n            linewidth = x * 1.5\n        )\n    }\n\n    p\n}\nOur Research Question: How can healthcare systems effectively reduce low-value care that wastes millions in resources?\nOur Natural Experiment: Switzerland tried two different approaches in the case of prescription of Vitamin D tests: clinical guidelines vs.¬†financial restrictions. We tracked what actually happened to the number of prescriptions.\nThe Results? üëá Scroll to see the story unfold‚Ä¶\nüìñ Full Study: The impact of Choosing WiselyTM recommendations and insurance coverage restrictions on the provision of low-value care: an interrupted time series analysis of vitamin D tests (Sallin et al. 2025)"
  },
  {
    "objectID": "posts/2025-06-07-blog1/scroll.html#a-policy-response",
    "href": "posts/2025-06-07-blog1/scroll.html#a-policy-response",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "A Policy Response",
    "text": "A Policy Response\nThis increase led to several policy measures. In April 2021, the Smarter Medicine initiative, which is the Swiss equivalent of Choosing Wisely‚Ñ¢, included vitamin D testing in its list of procedures to avoid. The recommendation was simple: no routine measurement of 25(OH)-Vitamin D in patients without risk factors. Physicians were informed of these measures.\nA year later, the Federal Office of Public Health introduced a coverage restriction (limitatio), limiting reimbursement for such tests. Together, these steps offered a natural experiment to observe how clinical recommendations and financial incentives influence medical practice."
  },
  {
    "objectID": "posts/2025-06-07-blog1/scroll.html#using-real-world-data-to-evaluate-the-effect",
    "href": "posts/2025-06-07-blog1/scroll.html#using-real-world-data-to-evaluate-the-effect",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "Using Real-World Data to Evaluate the Effect",
    "text": "Using Real-World Data to Evaluate the Effect\nTo examine these changes, we analyzed mandatory health insurance claims data from SWICA, covering about 10% of the Swiss population. The data include more than 3‚Äô600 general practitioners and group practices, with adult patients who had at least one consultation between 2018 and 2023.\nWe applied interrupted time-series analysis to estimate how testing volumes evolved around the two interventions. The method compares observed data with a counterfactual trend, which shows what we would expect if the interventions had not taken place.\nThe models account for patient characteristics, clinical indications for testing based on Swiss guidelines, and physician-specific prescribing behavior. This allows us to isolate the effect of the policy interventions from broader temporal or compositional changes."
  },
  {
    "objectID": "posts/2025-06-07-blog1/scroll.html#a-multi-disciplinary-collaboration",
    "href": "posts/2025-06-07-blog1/scroll.html#a-multi-disciplinary-collaboration",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "A Multi-Disciplinary Collaboration",
    "text": "A Multi-Disciplinary Collaboration\nThis study is the result of a productive collaboration between the health services research team at SWICA, physicians at the Institute of Primary Care of the University of Z√ºrich, and health economists at the Institute of Health Economics and Health Policy of the Bern University of Applied Sciences.\nThis collaboration demonstrates how insights from claims data can advance our understanding of the healthcare system and inform policy decisions aimed at reducing costs for the Swiss population."
  },
  {
    "objectID": "posts/2025-06-07-blog1/scroll.html#the-results-in-one-scroll",
    "href": "posts/2025-06-07-blog1/scroll.html#the-results-in-one-scroll",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "The results in one scroll",
    "text": "The results in one scroll\n\n\n\n\nReading the Chart: What Are We Looking At?\n‚óè‚óè‚óè Grey line = Actual vitamin D tests prescribed each month (real SWICA data)\n‚óè‚óè‚óè Red line = What our statistical model predicts should happen\n‚ñ¨‚ñ¨‚ñ¨ Green box = COVID-19 lockdown period (March-April 2020)\nWhy this matters: The red and grey lines track closely together, showing our model accurately captures normal prescribing patterns. This means we can detect when policies actually change physician behavior.\n\n\n\n\nVitamin D Test Prescriptions Rose Despite Low-Value Status\nDespite clear evidence of low clinical value, vitamin D test prescriptions rose by 20% between 2018 and 2021.\nA textbook example of low-value care in the healthcare system (see also Obsan 2023).\n\n\n\n\nApril 2021: Smarter Medicine Takes Action\nSwitzerland‚Äôs Choosing Wisely‚Ñ¢ campaign places vitamin D testing on their ‚ÄúTop 5‚Äù list of unnecessary procedures.\n\n\n\n\n\nClear message: ‚ÄúNo routine testing for patients without risk factors.‚Äù\n\n\n\n\nClinical Recommendations: Modest Impact\nThe Smarter Medicine recommendation shows a slight downward trend.\nBut is this enough? Let‚Äôs compare with what would have happened without intervention‚Ä¶\n\n\n\n\nRevealing the Counterfactual\nThe teal dashed line shows what would have happened without the recommendation.\nTesting rates would have continued climbing upward.\n\n\n\n\nThe Numbers: Clinical Recommendations Work, But Modestly\nWe conduct statistical tests to see whether the recommendation led to a recognizable pattern. The number of tests per consultation falls by 5.98% in the 12‚Äâmonths following the recommendation.\n\n\n\n\nJuly 2022: Strong Regulatory Measure\n\n\nThe Federal Office of Public Health restricts coverage. Patients now pay out-of-pocket for routine tests.\n\n\n\n\nFinancial Incentives: The Game Changer\nThe number of tests per consultation drops by 57.82% in the 6 months following the coverage restriction. This is a dramatic drop compared to clinical recommendations alone.\n\n\n\n\nThe Bottom Line: 15.65 Million CHF Saved\nHealthcare system savings of 15.65 million CHF in 2022 alone.\nThat‚Äôs 1.8 CHF per Swiss resident.\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -16)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -16)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -15)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = -15)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = 0)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = 0)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = 0)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = NULL)\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = NULL)"
  },
  {
    "objectID": "posts/2025-06-07-blog1/scroll.html#key-findings-and-policy-implications",
    "href": "posts/2025-06-07-blog1/scroll.html#key-findings-and-policy-implications",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "Key Findings and Policy Implications",
    "text": "Key Findings and Policy Implications\nClinical recommendations alone proved less effective than government regulation in reducing low-value care in Switzerland. However, our analysis revealed important nuances.\nWe found no unintended consequences from the coverage limitation: vitamin D supplementation rates remained unaffected, suggesting the policy successfully targeted testing without compromising appropriate treatment.\nHowever, from a health policy perspective, simply removing procedures from basic insurance coverage cannot be the default solution for addressing unnecessary treatments. This regulatory approach creates high administrative burden for physicians.\nA more sustainable solution lies in strengthening financial incentives that align provider and payer interests. In Switzerland, this can be achieved through managed care contracts between physician networks and health insurers within alternative insurance models. These contracts establish quality standards while creating shared financial responsibility among physicians‚Äîencouraging appropriate care delivery without heavy-handed regulation."
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "Blog",
    "section": "",
    "text": "Here are some posts I wrote about the healthcare system, teaching programming, and other interests.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHealth expenditure and health outcomes\n\n\nDo higher health expenditures lead to better health outcomes? Students explored this question by working with international data on health spending and outcomes. The project‚Ä¶\n\n\n\nAur√©lien Sallin\n\n\nJan 19, 2026\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAn artistic map of my biking meandering using rStrava and open street maps\n\n\nIn 2025, I spent 322h biking around the countryside. Here is an artistic, data visualization way, to represent these hours of discovery and sweating effort.\n\n\n\nAur√©lien Sallin\n\n\nDec 31, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGuidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?\n\n\nSwiss natural experiment reveals financial incentives reduced unnecessary vitamin D testing by 60% while clinical guidelines achieved only 6% reduction. Analysis of 3,600+‚Ä¶\n\n\n\nAur√©lien Sallin\n\n\nOct 20, 2025\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html",
    "href": "posts/202601_health/health_expenditures_dh.html",
    "title": "Health expenditure and health outcomes",
    "section": "",
    "text": "In my course ‚ÄúData Handling‚Äù at the University of St.¬†Gallen, students in BA Economics learn their first steps in handling data. These steps are usually not covered in economics programs, where the focus lies mostly on statistics and econometrics. However, applied work starts earlier: finding relevant data, importing it, cleaning it, merging it, and summarising it. This is represented by the data pipeline workflow, which forms the backbone of the course.\n\n\n\n\n\nTo make these steps concrete, we applied the pipeline to an economic question in a group project: Do higher health expenditures buy better health? Students worked with real-world data on life expectancy and perceived health status to investigate whether and how spending relates to outcomes. This setup allows students to practice the technical steps in data handling while engaging with a topic that raises real economic questions."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#introduction",
    "href": "posts/202601_health/health_expenditures_dh.html#introduction",
    "title": "Health expenditure and health outcomes",
    "section": "Introduction",
    "text": "Introduction\nIn my course ‚ÄúData Handling‚Äù, I teach students in BA Econ their first steps with data analysis. This step is oftentimes overlooked in classical Econ programs, where the focus lies mostly on statistics, econometrics, and methods. However, anyone with applied and research experience knows that all the steps before statistical analysis are crucial: finding the right data, importing, cleaning, and summarizing data.\n\nAcknowledgment: This course was originally created by U Matter. I am grateful for the foundation they provided and have since taken over and further developed the course content.\n\n\n\n\n\n\nIn the course, we covered the data pipeline in a group project. The idea was to explore critical economic questions and to highlight the data science pipeline. The group project investigates the relationship between healthcare expenditures and health outcomes, focusing on life expectancy and perceived health status. By combining pedagogical rigor with real-world data, this case study demonstrates how data science can illuminate key insights in health economics.\nThe relationship between health expenditures and health outcomes has long been a central topic in health economics. Empirical studies show a positive but non-linear relationship between health spending and outcomes such as life expectancy, particularly in low- and middle-income countries. In high-income settings, however, diminishing returns are evident. For example, the United States spends more per capita on health than any other nation, yet its health outcomes often lag behind those of countries with lower spending (@anderson2003s).\nThe task highlights all the critical skills an applied econonomist should master: understanding data, use APIs to extract data, clean, merge, investigate, and present results. Here is a summary of the group project with the critical steps. Note that in the group project students were guided through steps. Only the critical ones are shown here."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#the-task-retrieving-data-and-create-a-story",
    "href": "posts/202601_health/health_expenditures_dh.html#the-task-retrieving-data-and-create-a-story",
    "title": "Health expenditure and health outcomes",
    "section": "The task: retrieving data and create a Story",
    "text": "The task: retrieving data and create a Story"
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#leveraging-apis-for-data-retrieval",
    "href": "posts/202601_health/health_expenditures_dh.html#leveraging-apis-for-data-retrieval",
    "title": "Health expenditure and health outcomes",
    "section": "Leveraging APIs for Data Retrieval",
    "text": "Leveraging APIs for Data Retrieval\nThe project begins with the use of APIs to retrieve data from the World Bank and OECD. Instead of manually downloading datasets, we utilized API wrappers like WDI and OECD packages in R. These tools simplify access to large datasets, making them ideal for teaching students how to automate data retrieval. To introduce students to APIs and their advantages, we were honored to have Minna Heim from the KOF Institute for a guest lecture (see blog).\n\nCurrent health expenditure per capita (in current US$)\nCurrent health expenditure (% of GDP)\nCurrent health expenditure per capita, PPP (current international $)\n\nWe will also collect data on perceived health status from the OECD, which are available through the OECD Developer API query builder or through API wrappers such as the OECD package.\nIn each step, I asked students to perform some cleaning. Data cleaning is where the magic of data science often happens. In this project, we:\n\nFiltered out irrelevant observations (e.g., aggregates or gender-specific data).\nStandardized variable names and formats across datasets.\n\n\n\nShow R code for importing World Bank Data\n# Search for \"health expenditure\" indicators\nindicators &lt;- WDIsearch(\"health expenditure\")\nhead(indicators, 10)  # View first 10 results\n\ndf_WorldBank_health &lt;- WDI(\n  country = \"all\",\n  indicator = c(\n    \"ind_WorldBank_health_gdp\" = \"SH.XPD.CHEX.GD.ZS\",\n    \"ind_WorldBank_health_usd\" = \"SH.XPD.CHEX.PC.CD\",\n    \"ind_WorldBank_health_pp\" = \"SH.XPD.CHEX.PP.CD\",\n    \"ind_WorldBank_lifeexpectancy\" = \"SP.DYN.LE00.IN\"\n  ),\n  start = 2000,\n  end = 2024,\n  extra = TRUE\n) |&gt;\n  as_tibble()\n\n\n# Remove aggregates\ndf_WorldBank_health &lt;- df_WorldBank_health |&gt;\n  filter(region != \"Aggregates\")\n\n# Keep the relevant variables and values\ndf_WorldBank_health &lt;- df_WorldBank_health |&gt;\n  select(\n    iso3c, year, income, country,\n    ind_WorldBank_health_gdp, ind_WorldBank_health_usd, ind_WorldBank_health_pp, ind_WorldBank_lifeexpectancy) |&gt;\n  filter(iso3c != \"\") |&gt;\n  rename(\n    country = iso3c,\n    country_name = country\n  )\n\n# Explore countries with NA: many are high income\nna_table &lt;- df_WorldBank_health |&gt;\n  group_by(income, country_name, country) |&gt;\n  summarise(\n    number_years = n_distinct(year),\n    na_gdp = sum(is.na(ind_WorldBank_health_gdp)),\n    na_usd = sum(is.na(ind_WorldBank_health_usd)),\n    na_pp = sum(is.na(ind_WorldBank_health_pp)),\n    na_le = sum(is.na(ind_WorldBank_lifeexpectancy))\n  ) |&gt;\n  filter(na_gdp &gt; 0 | na_usd &gt; 0 | na_pp &gt; 0 | na_le &gt; 0)\n\nna_table\n\n\n\n\nShow R code for importing OECD Data\n# Perceived health status\ndataset_id_phs &lt;- \"OECD.ELS.HD,DSD_HEALTH_STAT@DF_PHS,1.0\"\n\ndf_oecd_phs &lt;- get_dataset(\n    dataset_id_phs,\n    start_time = 2000,\n    end_time = 2024\n    )\n\n# Filter for perceived health status\ndf_oecd_phs &lt;- df_oecd_phs |&gt;\n  filter(SEX == \"_T\") |&gt; # all genders\n  filter(AGE == \"Y_GE15\") |&gt;   # aged 15 years old and over\n  filter(HEALTH_STATUS == \"G\") # who report their health to be ‚Äògood/very good' (or excellent)\n\n# We also focus on non-defined Socio-econ status\ndf_oecd_phs &lt;- df_oecd_phs |&gt;\n  filter(SOCIO_ECON_STATUS == \"_Z\")\n\n# Keep the relevant variables and values\ndf_oecd_phs &lt;- df_oecd_phs |&gt;\n  mutate(\n    TIME_PERIOD = as.integer(TIME_PERIOD),\n    ObsValue = as.numeric(ObsValue)\n    ) |&gt;\n  select(REF_AREA, TIME_PERIOD, ObsValue) |&gt;\n  rename(\n    country = REF_AREA,\n    year = TIME_PERIOD,\n    health_status_oecd = ObsValue\n  )\n\n\nThis step not only highlights the technical skills required to interact with APIs but also emphasizes the importance of reproducibility in data science workflows."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#to-not-mislead-others-and-not-embarrass-yourself-know-your-data.",
    "href": "posts/202601_health/health_expenditures_dh.html#to-not-mislead-others-and-not-embarrass-yourself-know-your-data.",
    "title": "Health expenditure and health outcomes",
    "section": "‚ÄúTo not mislead others and not embarrass yourself, know your data‚Äù.*",
    "text": "‚ÄúTo not mislead others and not embarrass yourself, know your data‚Äù.*\nIn the course, we emphasized the 4 fundamental questions to ask a dataset before going deeper into analysis. These questions are:\n\n\n\n\n\n\nInspired by Jeremy G. Weber‚Äôs ‚ÄúStatistics for Public Policy‚Äù, 2024.\n\n\nKnow your data\n\nDefinitions: understanding the dimensions behind statistics. In statistics, definitions are often institutional or constructed rather than natural facts. Examples include poverty rate, unemployment, costs, and admissions.\nUnits: grasping the real-world meaning of a certain quantity of a variable (e.g.¬†USD or Euros, liters or gallons). This also covers scale: percentages vs shares, per capita vs totals, logs vs levels.\nQuality and plausibility: spotting measures and values that are unrealistic or inconsistent with other data sources (e.g.¬†outliers).\nUnit of observation: understanding what a single observation represents (e.g.¬†a country, or a country per year). Is the dataset a panel, a cross-section, a repeated cross-section, or a time series? This step also helps clarify the unit of analysis in later stages.\n\nWe looked at these four points in the context of our data. Definitions and units are particularly important when it comes to the economic relevance of choosing health expenditures as share of GDP or as PPP. Also, we looked at perceived health status and how the definition can be questioned. Finally, we explored the quality of our indicators comparing our main data sources wiht alternative data sources."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#merging-sources-and-exploring",
    "href": "posts/202601_health/health_expenditures_dh.html#merging-sources-and-exploring",
    "title": "Health expenditure and health outcomes",
    "section": "Merging sources and Exploring",
    "text": "Merging sources and Exploring\nA crucial step in the analysis is to merge datasets. Although this step is not much more than one or two lines of code, a lot of assumptions and choices run under the hood. When merging, questions about missing values, representativeness of the sample, and units of observations must be answered. The point is to merge at the country-year level. World Bank data merge well, but contain missing values in the indicators. When merging with OECD data, we must choose whether to do a filtering join (through inner join, thus de facto restricting the dataset to OECD countries) or to keep all the information with a full join or a left join with the World Bank data as left dataset.\n\n\nShow R code for merging WB and OECD data\n# Merge datasets\ndf_final &lt;- df_WorldBank_health |&gt;\n  full_join(df_oecd_phs, by = c(\"country\", \"year\"))\n\n# Transform income groups to factors:\nincome_groups &lt;- c(\"Low income\", \"Lower middle income\", \"Upper middle income\", \"High income\")\n\ndf_final &lt;- df_final |&gt;\n    mutate(income = factor(income, levels = income_groups))\n\n\nThe merging process was particularly instructive, as it required decisions about handling missing values and choosing the appropriate type of join (e.g., full join vs.¬†inner join). These steps illustrate the real-world challenges of working with messy data."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#trends",
    "href": "posts/202601_health/health_expenditures_dh.html#trends",
    "title": "An artistic map of my biking meandering using rStrava and open street maps",
    "section": "Trends",
    "text": "Trends\nWe explored trends and summary statistics for each outcome.\n\n\nShow R code for merging WB and OECD data\ndf_final |&gt;\n  pivot_longer(\n    cols = c(\n      ind_WorldBank_health_gdp,\n      ind_WorldBank_health_usd,\n      ind_WorldBank_health_pp\n    ),\n    values_to = \"value\",\n    names_to = \"indicator\"\n  ) |&gt;\n  group_by(year, indicator) |&gt;\n  summarise(ind_year = mean(value, na.rm = TRUE), .groups = \"drop\") |&gt;\n  mutate(\n    # Transform GDP values to percentage for labeling\n    formatted_value = case_when(\n      indicator == \"ind_WorldBank_health_gdp\" ~ ind_year,\n      TRUE ~ ind_year\n    )\n  ) |&gt;\n  ggplot(aes(x = year, y = formatted_value, color = indicator)) +\n  geom_line(linewidth = 1.2) +\n  facet_wrap(\n    ~ indicator,\n    ncol = 1,\n    scales = \"free_y\",\n    labeller = labeller(\n      indicator = c(\n        ind_WorldBank_health_gdp = \"Health expenditure (% of GDP)\",\n        ind_WorldBank_health_usd = \"Health expenditure per capita (USD)\",\n        ind_WorldBank_health_pp  = \"Health expenditure per capita (PPP)\"\n      )\n    )\n  ) +\n  scale_color_manual(\n    values = c(\n      ind_WorldBank_health_gdp = \"#0072B2\",\n      ind_WorldBank_health_usd = \"#009E73\",\n      ind_WorldBank_health_pp  = \"#D55E00\"\n    ),\n    guide = \"none\"\n  ) +\n  scale_y_continuous(\n    labels = function(x) {\n      # Check if this is the GDP facet (smaller values) and add % signs\n      if (length(x) &gt; 0 && max(x, na.rm = TRUE) &lt; 15) {\n        paste0(round(x), \"%\")\n      } else {\n        as.character(round(x))\n      }\n    }\n  ) +\n  expand_limits(y = 0) +\n  labs(\n    title = \"Health expenditure over time\",\n    subtitle = \"Different measurement concepts shown separately\",\n    x = \"Year\",\n    y = NULL\n  ) +\n  theme_classic() +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_text(size = 11, angle = 0, hjust = 0, face = \"bold\"),\n    legend.position = \"bottom\",\n    plot.title = element_text(size = 14),\n    plot.subtitle = element_text(size = 11),\n    panel.grid.major.x = element_line(color = \"grey90\", linewidth = 0.3)\n  )\n\n\n\n\n\n\n\n\n\nShow R code for merging WB and OECD data\ndf_final |&gt;\n  filter(year == 2024) |&gt;\n  select(country, country_name, ind_WorldBank_health_usd, ind_WorldBank_lifeexpectancy) |&gt;\n  mutate(\n    label = if_else(\n      ind_WorldBank_health_usd &gt; quantile(ind_WorldBank_health_usd, 0.9, na.rm = T) |\n      ind_WorldBank_health_usd &lt; quantile(ind_WorldBank_health_usd, 0.1, na.rm = T) |\n      ind_WorldBank_lifeexpectancy &lt; quantile(ind_WorldBank_lifeexpectancy, 0.1, na.rm = T) |\n      ind_WorldBank_lifeexpectancy &gt; quantile(ind_WorldBank_lifeexpectancy, 0.9, na.rm = T),\n      country_name, NA_character_\n    )\n  ) |&gt;\n  ggplot(aes(\n    y = ind_WorldBank_lifeexpectancy,\n    x = ind_WorldBank_health_usd\n  )) +\n  geom_point(alpha = 0.7, color = \"#0072B2\", size = 2.2) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"grey40\", linetype = \"dashed\") +\n  scale_y_continuous(limits = c(0, 100)) +\n  geom_text_repel(\n    aes(label = label),\n    size = 3,\n    color = \"black\",\n    segment.color = \"grey70\",\n    box.padding = 0.4,\n    max.overlaps = 15\n  ) +\n  labs(\n    title = \"Health Expenditure vs Life Expectancy (2019)\",\n    subtitle = \"Countries spending much but achieving little stand out\",\n    x = \"Health Expenditure per capita (in current USD)\",\n    y = \"Life Expectancy at Birth (years)\",\n    caption = \"Source: World Bank, 2019\"\n  ) +\n  theme_classic()\n\n\n\n\n\n\n\n\n\n\n\nShow R code for merging WB and OECD data\n# Create data\ndata_income_groups &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    health_gdp = mean(ind_WorldBank_health_gdp, na.rm = TRUE),\n    health_pp = mean(ind_WorldBank_health_pp, na.rm = TRUE),\n    health_usd = mean(ind_WorldBank_health_usd, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  pivot_longer(\n    cols = c(health_gdp, health_usd, health_pp),\n    names_to = \"indicator\",\n    values_to = \"value\"\n  )\n\ndata_income_groups |&gt;\n  filter(income %in% c(\"High income\", \"Low income\")) |&gt;\n  filter(indicator %in% c(\"health_gdp\", \"health_pp\")) |&gt;\n  ggplot(aes(x = year, y = value, color = income)) +\n  geom_line(linewidth = 1.2) +\n  facet_grid(\n    indicator ~ .,\n    scales = \"free_y\",\n    labeller = labeller(\n      indicator = c(\n        health_usd = \"Health expenditure per capita (USD)\",\n        health_gdp = \"Health expenditure (% of GDP)\",\n        health_pp = \"Health expenditure (PP)\"\n      )\n    )\n  ) +\n  labs(\n    title = \"Health expenditure by income group\",\n    subtitle = \"Different measurement concepts shown separately\",\n    x = \"Year\",\n    y = NULL,\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  scale_color_brewer(palette = \"Set2\") +\n  theme_classic() +\n  theme(\n    legend.position = \"bottom\",\n    strip.background = element_blank(),\n    strip.text = element_text(size = 11)\n  )\n\n\n\ndata_income_groups &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_gdp_mean = mean(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_gdp_sd = sd(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_gdp_coeffvar = sd(ind_WorldBank_health_gdp, na.rm = T)/mean(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_usd_mean = mean(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_usd_sd = sd(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_usd_coeffvar = sd(ind_WorldBank_health_usd, na.rm = T)/mean(ind_WorldBank_health_usd, na.rm = T)\n    )\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_usd_mean, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Health expenditure per capita by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (current US$)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_gdp_mean, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Health expenditure (% of GDP) by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (% of GDP)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\ndf_final |&gt;\n  group_by(year) |&gt;\n  summarize(\n    ind_WorldBank_lifeexpectancy = mean(ind_WorldBank_lifeexpectancy, na.rm = T)\n  ) |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_lifeexpectancy)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Life expectancy at birth by income group\",\n    x = \"Year\",\n    y = \"Life expectancy at birth by income group\",\n    color = \"Income group\"\n  ) +\n  theme_minimal()\n\n\ndf_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  group_by(year, income) |&gt;\n  summarize(\n    ind_WorldBank_lifeexpectancy = mean(ind_WorldBank_lifeexpectancy, na.rm = T)\n  ) |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_lifeexpectancy, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Life expectancy at birth by income group\",\n    x = \"Year\",\n    y = \"Life expectancy at birth by income group\",\n    color = \"Income group\"\n  ) +\n  theme_minimal()\n\n\n# 2, Health status\ndf_final |&gt;\n  group_by(year) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm=TRUE)\n  ) |&gt;\n  ggplot(aes(x = year, y = avg_health_status)) +\n  geom_line(size=1.2) +\n  labs(\n    title = \"Average Health Status Over Time \",\n    x = \"Year\",\n    y = \"Share of people who report to be in good health\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    axis.text.x = element_text(angle=45, hjust=1)\n  )\n\n# Health status per income group\ndf_final |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm=TRUE)\n  ) |&gt;\n  ggplot(aes(x = year, y = avg_health_status, color = income)) +\n  geom_line(size=1.2) +\n  labs(\n    title = \"Average Health Status Over Time \",\n    x = \"Year\",\n    y = \"Share of people who report to be in good health\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    axis.text.x = element_text(angle=45, hjust=1)\n  )"
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#the-final-story-insights-and-visualization",
    "href": "posts/202601_health/health_expenditures_dh.html#the-final-story-insights-and-visualization",
    "title": "Health expenditure and health outcomes",
    "section": "The final story: insights and visualization",
    "text": "The final story: insights and visualization\nThe relationship between expenditures and outcomes confirms the hypotheses. To answer our research question: yes, higher spending is associated with higher life expectancy, but the gains flatten at higher levels of spending (diminishing returns). This is particularly impressive for two outlier countries: Switzerland and the US.\n\n\n\n\n\nFor perceived health status, the association is weaker and only observable for OECD countries. Cultural and reporting differences play a larger role, and countries with similar levels of spending can report different levels of perceived health.\nAt the end of the project, students were asked to reflect and communicate their results through a short LinkedIn post. This forced them to translate an analytical workflow into a clear narrative for a broader audience.\nSome groups chose a more classic academic narrative (‚ÄúOur analysis examines how healthcare spending relates to population health across income groups.‚Äù), while others adopted a more polemic or provocative tone üòé (with titles like ‚Äúüí°The Wealth-Health Gap: Money Buys Years, But Only Up To A Point‚Äù, ‚ÄúWhat keeps people healthy longer ‚Äì money or something more?‚Äù, or ‚ÄúGreedy Big Pharma or drivers of longer lives? As ageing, long COVID and tight budgets strain health systems, one question matters: are we buying more health or just spending more money?‚Äù). The range of styles showed that data can support different narratives, as long as the underlying work is sound."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#conclusion",
    "href": "posts/202601_health/health_expenditures_dh.html#conclusion",
    "title": "Health expenditure and health outcomes",
    "section": "Conclusion",
    "text": "Conclusion\nThis project combines data handling with economic reasoning. Students worked with real data, used reproducible workflows, and examined how measurement choices affect conclusions. The exercise shows how data science and health economics meet in practice, and how young economists can now work with data in ways that lead to meaningful and interesting economic conclusions.\nAs the instructor, it was encouraging to see how quickly students could implement the full data pipeline and arrive at their own data-informed conclusions once they worked with real data. The way we teach data science has changed significantly in the past three years with the rise of large language models. Teaching data science and coding in 2025 is not the same as in 2022: in my experience, students are more effective at producing results with code, but less likely to understand every step in detail.\nThis project emphasised the understanding of each step while still enabling students to complete a full analysis. Only a few years ago, delivering such an end-to-end pipeline would have been unlikely at the bachelor level; today it has become achievable and rewarding for students üèÜüéØ‚úÖ."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#measuring-health-expenditures",
    "href": "posts/202601_health/health_expenditures_dh.html#measuring-health-expenditures",
    "title": "Health expenditure and health outcomes",
    "section": "Measuring health expenditures",
    "text": "Measuring health expenditures\nHealth expenditures can be expressed in different ways. In this project we explored three common indicators: expenditure per capita in USD, expenditure per capita in Purchasing-Power-Parity (PPP) terms, and expenditure as a share of GDP. These indicators do not tell the same story. USD reflects nominal spending power, PPP adjusts for differences in price levels, and the GDP share indicates how much of a country‚Äôs output is given to health care.\nFor cross-country comparisons, PPP is usually more informative because it accounts for cost-of-living differences. Using USD tends to exaggerate gaps between countries with different price levels, and the GDP share can look high in countries with smaller economies even when absolute health spending is low. This also affects interpretation of cases such as the United States, where high spending in USD and PPP terms coexists with lower outcomes.\n\n\n\n\n\nStudents were asked to look at expenditures in USD and as share of GDP, discuss observed trends, and compare indicators. We clearly saw a pattern of increasing per capita healthcare spending for high-income countries since 2000, whereas expenditures in countries in the lower income bracket increased slower. On average, high-income countries dedicated 8.1% of GDP for health in 2022."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#measuring-health-quality-life-expectancy-and-perceived-health-status",
    "href": "posts/202601_health/health_expenditures_dh.html#measuring-health-quality-life-expectancy-and-perceived-health-status",
    "title": "Health expenditure and health outcomes",
    "section": "Measuring health quality: life expectancy and perceived health status",
    "text": "Measuring health quality: life expectancy and perceived health status\n\n\nShow R code for merging WB and OECD data\ndf_final |&gt;\n  group_by(year) |&gt;\n  summarize(\n    ind_WorldBank_lifeexpectancy = mean(ind_WorldBank_lifeexpectancy, na.rm = T)\n  ) |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_lifeexpectancy)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Life expectancy at birth by income group\",\n    x = \"Year\",\n    y = \"Life expectancy at birth by income group\",\n    color = \"Income group\"\n  ) +\n  theme_minimal()\n\n\ndf_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  group_by(year, income) |&gt;\n  summarize(\n    ind_WorldBank_lifeexpectancy = mean(ind_WorldBank_lifeexpectancy, na.rm = T)\n  ) |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_lifeexpectancy, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Life expectancy at birth by income group\",\n    x = \"Year\",\n    y = \"Life expectancy at birth by income group\",\n    color = \"Income group\"\n  ) +\n  theme_minimal()\n\n\n# 2, Health status\ndf_final |&gt;\n  group_by(year) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm=TRUE)\n  ) |&gt;\n  ggplot(aes(x = year, y = avg_health_status)) +\n  geom_line(size=1.2) +\n  labs(\n    title = \"Average Health Status Over Time \",\n    x = \"Year\",\n    y = \"Share of people who report to be in good health\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    axis.text.x = element_text(angle=45, hjust=1)\n  )\n\n# Health status per income group\ndf_final |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm=TRUE)\n  ) |&gt;\n  ggplot(aes(x = year, y = avg_health_status, color = income)) +\n  geom_line(size=1.2) +\n  labs(\n    title = \"Average Health Status Over Time \",\n    x = \"Year\",\n    y = \"Share of people who report to be in good health\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    axis.text.x = element_text(angle=45, hjust=1)\n  )"
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#teaching-young-economists-to-work-with-data",
    "href": "posts/202601_health/health_expenditures_dh.html#teaching-young-economists-to-work-with-data",
    "title": "Health expenditure and health outcomes",
    "section": "",
    "text": "In my course ‚ÄúData Handling‚Äù at the University of St.¬†Gallen, students in BA Economics learn their first steps in handling data. These steps are usually not covered in economics programs, where the focus lies mostly on statistics and econometrics. However, applied work starts earlier: finding relevant data, importing it, cleaning it, merging it, and summarising it. This is represented by the data pipeline workflow, which forms the backbone of the course.\n\n\n\n\n\nTo make these steps concrete, we applied the pipeline to an economic question in a group project: Do higher health expenditures buy better health? Students worked with real-world data on life expectancy and perceived health status to investigate whether and how spending relates to outcomes. This setup allows students to practice the technical steps in data handling while engaging with a topic that raises real economic questions."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#the-task-data-retrieval-and-basic-exploration",
    "href": "posts/202601_health/health_expenditures_dh.html#the-task-data-retrieval-and-basic-exploration",
    "title": "Health expenditure and health outcomes",
    "section": "The task: data retrieval and basic exploration",
    "text": "The task: data retrieval and basic exploration\nThe question of whether higher health expenditures lead to better health outcomes is a recurring theme in health economics. Spending is positively associated with outcomes in low- and middle-income countries, while the relationship is weaker in high-income settings. The United States and Switzerland are a well-known case: high spending with comparatively lower outcomes (@anderson2003s).\nFor this project, students worked with international data to examine three hypotheses:\n\nHigher health expenditures are associated with higher life expectancy.\nHigher health expenditures are associated with better perceived health status.\nThe marginal gains from health spending are smaller in high-income settings than in lower-income settings.\n\nStudents were guided through the technical steps: retrieving data through APIs, cleaning datasets, merging sources, and exploring basic patterns. The original group project material can be accessed here [link to add]. This this project, they learned all the critical skills an applied econonomist should master."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#retrieving-data-through-apis",
    "href": "posts/202601_health/health_expenditures_dh.html#retrieving-data-through-apis",
    "title": "Health expenditure and health outcomes",
    "section": "Retrieving data through APIs",
    "text": "Retrieving data through APIs\nBecause international economic analysis relies on reproducible data pulls, APIs are becoming standard tools in applied work. Students retrieved data on health expenditures from the World Bank API using API wrappers such as WDI in R, or by programming their own API wrapper. We focused on three indicators:\n\nCurrent health expenditure per capita (in current US$)\nCurrent health expenditure (% of GDP)\nCurrent health expenditure per capita, PPP (current international $)\n\nData on perceived health status was retrieved from the OECD API through the OECD package. Accessing data through APIs introduces students to reproducible workflows and avoids manual downloading. To support this part of the project, Minna Heim from the KOF Institute gave a guest lecture on working with APIs.\nEarly steps involved filtering out irrelevant observations (e.g., aggregates or gender-specific data) and standardising variable names and formats across datasets. Data cleaning is where the magic of data science often happens."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#knowing-your-data",
    "href": "posts/202601_health/health_expenditures_dh.html#knowing-your-data",
    "title": "Health expenditure and health outcomes",
    "section": "Knowing your data",
    "text": "Knowing your data\n\n‚ÄúTo not mislead others and not embarrass yourself, know your data‚Äù.*\n\nWe emphasized the four basic questions to apply to a new dataset before going deeper into analysis:\n\n\n\n\n\n\nInspired by Jeremy G. Weber‚Äôs ‚ÄúStatistics for Public Policy‚Äù, 2024.\n\n\nKnow your data\n\nDefinitions: what exactly is being measured. Many economic indicators are constructed rather than natural facts (e.g.¬†poverty rates, unemployment, costs).\nUnits: in which quantities the variable is expressed (e.g.¬†liters or gallons, USD or PPP, per capita or totals, etc.). This also covers scale: percentages vs shares, per capita vs totals, logs vs levels.\nQuality and plausibility: spotting measures and values that are unrealistic or inconsistent with other data sources (e.g.¬†outliers).\nUnit of observation: what one observation represents (e.g.¬†country or country-year). This clarifies the relevant population and the level of analysis. Is the dataset a panel, a cross-section, a repeated cross-section, or a time series?\n\nThese points are relevant for this project. The choice between USD, PPP, or percentage of GDP for health expenditures affects interpretation, as do definitions of perceived health status. We also compared our indicators to alternative sources to assess quality."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#merging-sources-and-exploring-the-data",
    "href": "posts/202601_health/health_expenditures_dh.html#merging-sources-and-exploring-the-data",
    "title": "Health expenditure and health outcomes",
    "section": "Merging sources and exploring the data",
    "text": "Merging sources and exploring the data\nThe datasets were merged at the country-year level. This step raises practical questions about missing values, sample composition, and representativeness. World Bank variables merge well but contain missing values in some indicators. When adding OECD data, join choice affects the resulting sample. For example, an inner join restricts the sample to OECD countries, while a left or full join retains more information at the cost of missingness. These decisions influence the interpretation of results and illustrate the real-world challenges of working with data from different sources.\nThis part connected to concepts seen in the course: panel structures, join types, and handling missing data. It illustrated that empirical work in economics involves many decisions before any model is estimated."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#measuring-health-outcomes-life-expectancy-and-perceived-health-status",
    "href": "posts/202601_health/health_expenditures_dh.html#measuring-health-outcomes-life-expectancy-and-perceived-health-status",
    "title": "Health expenditure and health outcomes",
    "section": "Measuring health outcomes: life expectancy and perceived health status",
    "text": "Measuring health outcomes: life expectancy and perceived health status\nWe used two outcomes: life expectancy (from the World Bank) and perceived health status (from the OECD). Life expectancy is a widely used indicator of population health and correlates with many determinants of health. Perceived health status captures how individuals evaluate their own health and varies across countries for both health-related and cultural reasons. Students were asked to reflect on the advantages and disadvantages of using these measures as proxies for health quality.\nDifferences in perceived health status are informative but harder to compare across countries because reporting styles, expectations, and social norms influence responses. This makes it possible for two countries with similar health systems to display different levels of reported health.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLife expectancy is highly correlated with income brackets. We observe a Covid effect especially in middle income countries. Average perceived health status in OECD countries navigated between 65% and 70% since 2005, which is stable in comparison to increases in expenditures."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#acknowledgments",
    "href": "posts/202601_health/health_expenditures_dh.html#acknowledgments",
    "title": "Health expenditure and health outcomes",
    "section": "Acknowledgments",
    "text": "Acknowledgments\nThis course was originally created by Ulrich Matter. I am grateful for the foundation he provided and have since taken over and further developed the course content. To Federica and Andrea for support in preparing, supporting students, and grading the project. To Minna Heim for taking time to inspire students and to prepare the lecture on APIs. To Matt Bannert for inspiration."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#the-code",
    "href": "posts/202601_health/health_expenditures_dh.html#the-code",
    "title": "Health expenditure and health outcomes",
    "section": "The code:",
    "text": "The code:\n\n\nShow R code\n# Code for the project 2025 and the blog post on health expenditure and outcomes\n# Author: Aur√©lien Sallin\n# Date: January 2026\n# This code is different than the one used for the official solution, because\n# it is adapted for the blog post.\n\n\n\n# CHAPTER 0 ---------------------------------\n\n# Load required libraries\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(summarytools)\nlibrary(ggplot2)\nlibrary(qs)\nlibrary(ggrepel)\nlibrary(WDI)\nlibrary(OECD)\n\n\n# Set flag to download and process data or read from cache\ndownload_and_process &lt;- TRUE\n\n# CHAPTER 1 ---------------------------------\n# Chapter 1: Search for health expenditure indicators,\n# Download and preprocess World Bank health data\n\n\n# Search for relevant indicators related to health expenditure from the World Bank database\nindicators &lt;- WDIsearch(\"health expenditure\")\nhead(indicators, 10)  # Display the first 10 results\n\n\nif(download_and_process) {\n\n  # Download and preprocess World Bank health data\n  df_WorldBank_health &lt;- WDI(\n    country = \"all\",\n    indicator = c(\n      \"ind_WorldBank_health_gdp\" = \"SH.XPD.CHEX.GD.ZS\",  # Health expenditure as % of GDP\n      \"ind_WorldBank_health_usd\" = \"SH.XPD.CHEX.PC.CD\",  # Health expenditure per capita (current US$)\n      \"ind_WorldBank_health_pp\" = \"SH.XPD.CHEX.PP.CD\",   # Health expenditure per capita (PPP)\n      \"ind_WorldBank_lifeexpectancy\" = \"SP.DYN.LE00.IN\"  # Life expectancy at birth (years)\n    ),\n    start = 2000,\n    end = 2024,\n    extra = TRUE\n  ) |&gt;\n    as_tibble()\n\n  # Remove aggregate regions from the dataset\n  df_WorldBank_health &lt;- df_WorldBank_health |&gt;\n    filter(region != \"Aggregates\")\n\n  # Select relevant variables and clean the dataset\n  df_WorldBank_health &lt;- df_WorldBank_health |&gt;\n    select(\n      iso3c, year, income, country,\n      ind_WorldBank_health_gdp, ind_WorldBank_health_usd, ind_WorldBank_health_pp, ind_WorldBank_lifeexpectancy) |&gt;\n    filter(iso3c != \"\") |&gt;\n    rename(\n      country = iso3c,\n      country_name = country\n    )\n\n  # Explore countries with NA: many are high income\n  na_table &lt;- df_WorldBank_health |&gt;\n    group_by(income, country_name, country) |&gt;\n    summarise(\n      number_years = n_distinct(year),\n      na_gdp = sum(is.na(ind_WorldBank_health_gdp)),\n      na_usd = sum(is.na(ind_WorldBank_health_usd)),\n      na_pp = sum(is.na(ind_WorldBank_health_pp)),\n      na_le = sum(is.na(ind_WorldBank_lifeexpectancy))\n    ) |&gt;\n    filter(na_gdp &gt; 0 | na_usd &gt; 0 | na_pp &gt; 0 | na_le &gt; 0)\n\n  na_table\n\n  # Save data in cache as .qs\n  qsave(df_WorldBank_health, \"Project_dh2025/data/wb_health.qs\")\n\n}\n\n\n# CHAPTER 3 ---------------------------------\n# Chapter 3: Download and preprocess OECD health status data\n# Perceived health status\n\nif (download_and_process) {\n\n  # Download and preprocess OECD health status data\n  dataset_id_phs &lt;- \"OECD.ELS.HD,DSD_HEALTH_STAT@DF_PHS,1.0\"\n\n  df_oecd_phs &lt;- get_dataset(\n    dataset_id_phs,\n    start_time = 2000,\n    end_time = 2024\n  )\n\n  # Filter for perceived health status\n  df_oecd_phs &lt;- df_oecd_phs |&gt;\n    filter(SEX == \"_T\") |&gt; # all genders\n    filter(AGE == \"Y_GE15\") |&gt; # aged 15 years old and over\n    filter(HEALTH_STATUS == \"G\") # who report their health to be ‚Äògood/very good' (or excellent)\n\n  # We also focus on non-defined Socio-econ status\n  df_oecd_phs &lt;- df_oecd_phs |&gt;\n    filter(SOCIO_ECON_STATUS == \"_Z\")\n\n  # Keep the relevant variables and values\n  df_oecd_phs &lt;- df_oecd_phs |&gt;\n    mutate(\n      TIME_PERIOD = as.integer(TIME_PERIOD),\n      ObsValue = as.numeric(ObsValue)\n    ) |&gt;\n    select(REF_AREA, TIME_PERIOD, ObsValue) |&gt;\n    rename(\n      country = REF_AREA,\n      year = TIME_PERIOD,\n      health_status_oecd = ObsValue\n    )\n\n  # Save data in cache\n  qsave(df_oecd_phs, \"Project_dh2025/data/oecd_phs.qs\")\n}\n\n\nif(!download_and_process) {\n  df_WorldBank_health &lt;- qread(\"Project_dh2025/data/wb_health.qs\")\n  df_oecd_phs &lt;- qread(\"Project_dh2025/data/oecd_phs.qs\")\n}\n\n\n\n\n# CHAPTER 4 ---------------------------------\n# Chapter 4: Merge World Bank and OECD datasets\n# Merge datasets\ndf_final &lt;- df_WorldBank_health |&gt;\n  full_join(df_oecd_phs, by = c(\"country\", \"year\"))\n\n# Transform income groups to factors:\nincome_groups &lt;- c(\"Low income\", \"Lower middle income\", \"Upper middle income\", \"High income\")\n\ndf_final &lt;- df_final |&gt;\n    mutate(income = factor(income, levels = income_groups))\n\n\n\n# CHAPTER 5 ---------------------------------\n# Chapter 5: Analyze and visualize health expenditure trends\ndf_final |&gt;\n  pivot_longer(\n    cols = c(\n      ind_WorldBank_health_gdp,\n      ind_WorldBank_health_usd,\n      ind_WorldBank_health_pp\n    ),\n    values_to = \"value\",\n    names_to = \"indicator\"\n  ) |&gt;\n  group_by(year, indicator) |&gt;\n  summarise(ind_year = mean(value, na.rm = TRUE), .groups = \"drop\") |&gt;\n  mutate(\n    # Transform GDP values to percentage for labeling\n    formatted_value = case_when(\n      indicator == \"ind_WorldBank_health_gdp\" ~ ind_year,\n      TRUE ~ ind_year\n    )\n  ) |&gt;\n  ggplot(aes(x = year, y = formatted_value, color = indicator)) +\n  geom_line(linewidth = 1.2) +\n  facet_wrap(\n    ~ indicator,\n    ncol = 1,\n    scales = \"free_y\",\n    labeller = labeller(\n      indicator = c(\n        ind_WorldBank_health_gdp = \"Health expenditure (% of GDP)\",\n        ind_WorldBank_health_usd = \"Health expenditure per capita (USD)\",\n        ind_WorldBank_health_pp  = \"Health expenditure per capita (PPP)\"\n      )\n    )\n  ) +\n  scale_color_manual(\n    values = c(\n      ind_WorldBank_health_gdp = \"#0072B2\",\n      ind_WorldBank_health_usd = \"#009E73\",\n      ind_WorldBank_health_pp  = \"#D55E00\"\n    ),\n    guide = \"none\"\n  ) +\n  scale_y_continuous(\n    labels = function(x) {\n      # Check if this is the GDP facet (smaller values) and add % signs\n      if (length(x) &gt; 0 && max(x, na.rm = TRUE) &lt; 15) {\n        paste0(round(x), \"%\")\n      } else {\n        as.character(round(x))\n      }\n    }\n  ) +\n  expand_limits(y = 0) +\n  labs(\n    title = \"Health expenditure over time\",\n    subtitle = \"Different measurement concepts shown separately\",\n    x = \"Year\",\n    y = NULL\n  ) +\n  theme_classic() +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_text(size = 11, angle = 0, hjust = 0, face = \"bold\"),\n    legend.position = \"bottom\",\n    plot.title = element_text(size = 14),\n    plot.subtitle = element_text(size = 11),\n    panel.grid.major.x = element_line(color = \"grey90\", linewidth = 0.3)\n  )\n\ndf_gdp &lt;- df_final |&gt;\n  filter(!is.na(income)) |&gt;\n  filter(year == 2022) |&gt;\n  select(year, country, income, ind_WorldBank_health_gdp) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_pp = mean(ind_WorldBank_health_gdp, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n\n\n# Graph 1 for blog\n# Add group label and value at the end of each line (RHS), remove legend\ndf_plot &lt;- df_final |&gt;\n  filter(!is.na(income)) |&gt;\n  filter(year &gt;= 2000 & year &lt;= 2022) |&gt;\n  select(year, country, income, ind_WorldBank_health_pp) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_pp = mean(ind_WorldBank_health_pp, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(\n  df_plot,\n  aes(\n    x = year,\n    y = ind_WorldBank_health_pp,\n    color = income,\n    group = income\n  )\n) +\n  geom_line(linewidth = 1.1) +\n  # Use a friendly qualitative palette for income groups\n  scale_color_brewer(palette = \"Dark2\") +\n  # Label at the end (RHS) with group and value\n  geom_text(\n    data = group_by(df_plot, income) |&gt;\n      filter(year == 2022) |&gt;\n      mutate(vjust = if_else(income == \"Lower middle income\", -0.3, 0.5)),\n    aes(\n      label = paste0(income, \"\\n2022: \", round(ind_WorldBank_health_pp, 0)),\n      x = year + 0.5,\n      y = ind_WorldBank_health_pp,\n      color = income,\n      vjust = vjust\n    ),\n    hjust = 0,\n    size = 3.4,\n    fontface = \"bold\",\n    show.legend = FALSE\n  ) +\n  # Number at the start (LHS)\n  geom_text(\n    data = group_by(df_plot, income) |&gt;\n      filter(year == min(year)) |&gt;\n      mutate(vjust = if_else(income == \"Low income\", 0.6, 0.3)),\n    aes(\n      label = paste0(\"\", round(ind_WorldBank_health_pp, 0)),\n      x = year - 0.9,\n      y = ind_WorldBank_health_pp,\n      color = income,\n      vjust = vjust,\n    ),\n    hjust = 0,\n    size = 3.4,\n    fontface = \"bold\",\n    show.legend = FALSE\n  ) +\n  scale_y_continuous() +\n  scale_color_brewer(palette = \"Dark2\") +\n  # Ensure there is horizontal space for labels on the right and allow drawing outside panel\n  expand_limits(x = max(df_plot$year, na.rm = TRUE) + 1.5) +\n  coord_cartesian(clip = \"off\") +\n  labs(\n    subtitle = \"Income groups diverge in health spending: trends 2000-2022\",\n    title = \"High-income countries spend much more per person on health than others.\",\n    x = \"Year (2000-2022)\",\n    y = \"Health Expenditure per Capita (PPP)\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_classic() +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_text(size = 11, angle = 0, hjust = 0, face = \"bold\"),\n    legend.position = \"none\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 80, 5.5, 5.5) # increase right margin so RHS labels are visible\n  )\n\n# Save the faceted expenditure plot for the blog (wide, transparent PNG)\n# Assign plot to object and export\nggsave(\n  filename = \"Project_dh2025/figures/health_expenditure_time.png\",\n  plot = last_plot(),\n  width = 10,\n  height = 6,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n\n\n# Create data for income group analysis\ndata_income_groups &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    health_gdp = mean(ind_WorldBank_health_gdp, na.rm = TRUE),\n    health_pp = mean(ind_WorldBank_health_pp, na.rm = TRUE),\n    health_usd = mean(ind_WorldBank_health_usd, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  pivot_longer(\n    cols = c(health_gdp, health_usd, health_pp),\n    names_to = \"indicator\",\n    values_to = \"value\"\n  )\n\n\n\n# CHAPTER 6 ---------------------------------\n# Chapter 6: Analyze health expenditure statistics by income group\ndata_income_groups &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  filter(year &gt;= 2000 & year &lt;= 2022) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_gdp_mean = mean(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_gdp_sd = sd(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_gdp_coeffvar = sd(ind_WorldBank_health_gdp, na.rm = T)/mean(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_usd_mean = mean(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_usd_sd = sd(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_usd_coeffvar = sd(ind_WorldBank_health_usd, na.rm = T)/mean(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_ppp_mean = mean(ind_WorldBank_health_pp, na.rm = T),\n    ind_WorldBank_health_ppp_sd = sd(ind_WorldBank_health_pp, na.rm = T),\n    ind_WorldBank_health_ppp_coeffvar = sd(ind_WorldBank_health_pp, na.rm = T)/mean(ind_WorldBank_health_usd, na.rm = T)\n    )\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_usd_mean, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Health expenditure per capita by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (current US$)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_gdp_mean, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Health expenditure (% of GDP) by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (% of GDP)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_ppp_mean, color = income)) +\n  geom_line(linewidth = 1.2) +\n  labs(\n    title = \"Health expenditure per capita by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (PPP)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n\n\n# CHAPTER 7 ---------------------------------\n# Chapter 7: Analyze and visualize life expectancy trends\n## Life expectancy by income group: styled for blog\n# Compute yearly averages by income group (2000-2022)\ndf_le_plot &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  filter(year &gt;= 2000 & year &lt;= 2022) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_lifeexpectancy = mean(ind_WorldBank_lifeexpectancy, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(df_le_plot, aes(x = year, y = ind_WorldBank_lifeexpectancy, color = income, group = income)) +\n  geom_line(linewidth = 1) +\n  # RHS label with group name and 2022 value\n  geom_text(\n    data = df_le_plot %&gt;% group_by(income) %&gt;% filter(year == max(year)),\n    aes(\n      label = paste0(income, \"\\n2022: \", round(ind_WorldBank_lifeexpectancy, 1)),\n      x = year + 0.5\n    ),\n    hjust = 0,\n    vjust = 0.5,\n    size = 3.4,\n    fontface = \"bold\",\n    show.legend = FALSE\n  ) +\n  # LHS label with 2000 value\n  geom_text(\n    data = df_le_plot %&gt;% group_by(income) %&gt;% filter(year == min(year)),\n    aes(label = paste0(round(ind_WorldBank_lifeexpectancy, 1)),\n        x = year - 0.1),\n    hjust = 1, vjust = 0.5, size = 3.4, fontface = \"bold\", show.legend = FALSE\n  ) +\n  scale_y_continuous(limits = c(50, 81)) +\n  scale_color_brewer(palette = \"Dark2\") +\n  # allow labels outside plotting area and give room on the right\n  expand_limits(x = max(df_le_plot$year, na.rm = TRUE) + 1.5) +\n  coord_cartesian(clip = \"off\") +\n  labs(\n    subtitle = \"Life expectancy increased across all groups (2000‚Äì2022); lower-income groups saw faster gains.\",\n    title = \"Average life expectancy rose faster in lower-income groups, but gaps persist.\",\n    x = \"Year\",\n    y = \"Life expectancy at birth (years)\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_classic() +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 80, 5.5, 5.5)\n  )\n\n# Save life-expectancy plot as wide transparent PNG for blog\nggsave(\n  filename = \"Project_dh2025/figures/life_expectancy_income_groups.png\",\n  plot = last_plot(),\n  width = 8,\n  height = 6,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n\n\n# CHAPTER 8 ---------------------------------\n# Chapter 8: Analyze and visualize perceived health status trends\n# 2, Health status\n## OECD average perceived health status (styled for blog)\n# Compute OECD average by year (2000-2022)\ndf_oecd_status &lt;- df_final |&gt;\n  filter(!is.na(health_status_oecd)) |&gt;\n  filter(year &gt;= 2005 & year &lt;= 2022) |&gt;\n  group_by(year) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(df_oecd_status, aes(x = year, y = avg_health_status)) +\n  geom_line(size = 1.2, color = \"#0072B2\") +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 1, scale = 1), lim = c(60, 75)) +\n  labs(\n    subtitle = \"Average perceived health status (OECD): 2005‚Äì2022\",\n    title = \"The share of respondents reporting 'good/very good' health \\nin high income countries increased slowly in the past 20 years.\",\n    x = \"Year\",\n    y = \"Share reporting good/very good health\",\n    caption = \"Source: OECD\"\n  ) +\n  theme_classic() +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 5.5, 5.5, 5.5)\n  )\n\n# Save OECD health-status plot as wide transparent PNG for blog\nggsave(\n  filename = \"Project_dh2025/figures/oecd_health_status_avg.png\",\n  plot = last_plot(),\n  width = 8,\n  height = 6,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n# Health status per income group\ndf_final |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm=TRUE)\n  ) |&gt;\n  ggplot(aes(x = year, y = avg_health_status, color = income)) +\n  geom_line(size=1.2) +\n  labs(\n    title = \"Average Health Status Over Time \",\n    x = \"Year\",\n    y = \"Share of people who report to be in good health\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    axis.text.x = element_text(angle=45, hjust=1)\n  )\n\n\n# CHAPTER 9 ---------------------------------\n# Chapter 9: Explore relationships between health expenditure and outcomes\n# Example: Visualizing the relationship between spending and outcomes\ndf_final |&gt;\n  filter(year == 2022) |&gt;\n  filter(country_name != \"Central African Republic\") |&gt; # remove outlier with very low spending and life expectancy\n  select(\n    income,\n    country,\n    country_name,\n    ind_WorldBank_health_usd,\n    ind_WorldBank_health_pp,\n    ind_WorldBank_lifeexpectancy\n  ) |&gt;\n  mutate(\n    label = if_else(\n      (ind_WorldBank_health_usd &gt;\n        quantile(ind_WorldBank_health_usd, 0.9, na.rm = T) |\n        ind_WorldBank_health_usd &lt;\n          quantile(ind_WorldBank_health_usd, 0.1, na.rm = T) |\n        ind_WorldBank_health_pp &gt;\n          quantile(ind_WorldBank_health_pp, 0.9, na.rm = T) |\n        ind_WorldBank_health_pp &lt;\n          quantile(ind_WorldBank_health_pp, 0.1, na.rm = T) |\n        ind_WorldBank_lifeexpectancy &lt;\n          quantile(ind_WorldBank_lifeexpectancy, 0.1, na.rm = T) |\n        ind_WorldBank_lifeexpectancy &gt;\n          quantile(ind_WorldBank_lifeexpectancy, 0.9, na.rm = T)) &\n        income %in% c(\"High income\"), # Ensure only OECD countries are labeled\n      country_name,\n      NA_character_\n    )\n  ) |&gt;\n  ggplot(aes(\n    y = ind_WorldBank_lifeexpectancy,\n    x = ind_WorldBank_health_pp\n  )) +\n  geom_point(alpha = 0.75, color = \"#0072B2\", size = 2.6) +\n  geom_smooth(\n    method = \"loess\",\n    se = FALSE,\n    color = \"grey40\",\n    linetype = \"dashed\"\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  # Label outliers but exclude US and Switzerland (they are highlighted separately)\n  geom_text_repel(\n    data = . %&gt;%\n      filter(\n        !is.na(label) & !(country_name %in% c(\"United States\", \"Switzerland\"))\n      ),\n    aes(label = label),\n    size = 3.1,\n    color = \"black\",\n    segment.color = \"grey70\",\n    box.padding = 0.35,\n    max.overlaps = 20\n  ) +\n  # Highlight US and Switzerland with red points\n  geom_point(\n    data = df_final %&gt;%\n      filter(\n        year == 2022 & country_name %in% c(\"United States\", \"Switzerland\")\n      ),\n    aes(x = ind_WorldBank_health_pp, y = ind_WorldBank_lifeexpectancy),\n    color = \"#D55E00\",\n    size = 3.6\n  ) +\n  # Highlight countries that illustrate the threshold effect\n  geom_text_repel(\n    data = df_final %&gt;%\n      filter(year == 2022, country_name %in% c(\"United States\", \"Switzerland\")),\n    aes(\n      x = ind_WorldBank_health_pp,\n      y = ind_WorldBank_lifeexpectancy,\n      label = country_name\n    ),\n    color = \"#D55E00\",\n    size = 3.8,\n    fontface = \"bold\",\n    nudge_x = 1,\n    segment.color = \"grey50\",\n    show.legend = FALSE\n  ) +\n  labs(\n    title = \"Twice the spending, same or lower life expectancy\",\n    subtitle = \"US and Switzerland spend about twice as much on health (PPP per capita, 2022) as other OECD countries with similar life expectancy\",\n    x = \"Health expenditure per capita (PPP)\",\n    y = \"Life Expectancy at Birth (years)\",\n    caption = \"Spending shown in PPP per capita (purchasing power parity: adjusted for price-level differences). Outliers labeled. Source: World Bank, 2022.\"\n  ) +\n  theme_classic() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 5.5, 5.5, 5.5)\n  )\n\n# Save scatter for blog (wide transparent PNG)\nggsave(\n  filename = \"Project_dh2025/figures/spending_vs_life_2022.png\",\n  plot = last_plot(),\n  width = 12,\n  height = 8,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n\n# Example: Comparing perceived health status\ndf_final |&gt;\n  #filter(year == 2019) |&gt;\n  ggplot(aes(x = ind_WorldBank_health_pp, y = health_status_oecd)) +\n  geom_point() +\n  labs(\n    title = \"Perceived Health Status by Country\",\n    x = \"Healthcare Spending per Capita (PP)\",\n    y = \"Perceived Health Status (%)\"\n  )\n\n\n# End of code"
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#a-data-handling-project-linking-health-spending-and-health-outcomes",
    "href": "posts/202601_health/health_expenditures_dh.html#a-data-handling-project-linking-health-spending-and-health-outcomes",
    "title": "Health expenditure and health outcomes",
    "section": "A data handling project linking health spending and health outcomes",
    "text": "A data handling project linking health spending and health outcomes\nThe question of whether higher health expenditures lead to better health outcomes is a recurring theme in health economics. Spending is positively associated with outcomes in low- and middle-income countries, while the relationship is weaker in high-income settings (‚Äúplateau effect‚Äù). The United States and Switzerland are a well-known case: high spending with comparatively lower outcomes.\nFor this project, students worked with international data to examine three hypotheses:\n\nHigher health expenditures are associated with higher life expectancy.\nHigher health expenditures are associated with better perceived health status.\nThe marginal gains from health spending are smaller in high-income settings than in lower-income settings.\n\nStudents were guided through the technical steps to investigate these three hypotheses."
  },
  {
    "objectID": "posts/202601_health/health_expenditures_dh.html#know-your-data",
    "href": "posts/202601_health/health_expenditures_dh.html#know-your-data",
    "title": "Health expenditure and health outcomes",
    "section": "Know your data",
    "text": "Know your data\n\n‚ÄúTo not mislead others and not embarrass yourself, know your data‚Äù. (Jeremy G. Weber)\n\n\n\n\n\n\nWe emphasized the four basic questions to apply to a new dataset before going deeper into analysis. This part is inspired by Jeremy G. Weber‚Äôs ‚ÄúStatistics for Public Policy‚Äù, 2024.\n\nDefinitions: what exactly is being measured. Many economic indicators are constructed rather than natural facts (e.g.¬†poverty rates, unemployment, costs).\nUnits: in which quantities the variable is expressed (e.g.¬†liters or gallons, USD or PPP, per capita or totals, etc.). This also covers scale: percentages vs shares, per capita vs totals, logs vs levels.\nQuality and plausibility: spotting measures and values that are unrealistic or inconsistent with other data sources (e.g.¬†outliers).\nUnit of observation: what one observation represents (e.g.¬†country or country-year). This clarifies the relevant population and the level of analysis. Is the dataset a panel, a cross-section, a repeated cross-section, or a time series?\n\nThese points are relevant for this project. The choice between USD, PPP, or percentage of GDP for health expenditures affects interpretation, as do definitions of perceived health status. Students noticed how much interpretation depends on definitions, units, and the underlying data architecture."
  },
  {
    "objectID": "posts/202601_health/blog.html",
    "href": "posts/202601_health/blog.html",
    "title": "Health expenditure and health outcomes",
    "section": "",
    "text": "In my course ‚ÄúData Handling‚Äù at the University of St.¬†Gallen, students in BA Economics learn their first steps in handling data. These steps are usually not covered in economics programs, where the focus lies mostly on statistics and econometrics. However, applied work starts earlier: finding relevant data, importing it, cleaning it, merging it, and summarising it. This is represented by the data pipeline workflow, which forms the backbone of the course.\n\n\n\n\n\nTo make these steps concrete, we applied the pipeline to an economic question in a group project: Do higher health expenditures buy better health? Students worked with real-world data on life expectancy and perceived health status to investigate whether and how spending relates to outcomes. This setup allows students to practice the technical steps in data handling while engaging with a topic that raises real economic questions."
  },
  {
    "objectID": "posts/202601_health/blog.html#teaching-young-economists-to-work-with-data",
    "href": "posts/202601_health/blog.html#teaching-young-economists-to-work-with-data",
    "title": "Health expenditure and health outcomes",
    "section": "",
    "text": "In my course ‚ÄúData Handling‚Äù at the University of St.¬†Gallen, students in BA Economics learn their first steps in handling data. These steps are usually not covered in economics programs, where the focus lies mostly on statistics and econometrics. However, applied work starts earlier: finding relevant data, importing it, cleaning it, merging it, and summarising it. This is represented by the data pipeline workflow, which forms the backbone of the course.\n\n\n\n\n\nTo make these steps concrete, we applied the pipeline to an economic question in a group project: Do higher health expenditures buy better health? Students worked with real-world data on life expectancy and perceived health status to investigate whether and how spending relates to outcomes. This setup allows students to practice the technical steps in data handling while engaging with a topic that raises real economic questions."
  },
  {
    "objectID": "posts/202601_health/blog.html#a-data-handling-project-linking-health-spending-and-health-outcomes",
    "href": "posts/202601_health/blog.html#a-data-handling-project-linking-health-spending-and-health-outcomes",
    "title": "Health expenditure and health outcomes",
    "section": "A data handling project linking health spending and health outcomes",
    "text": "A data handling project linking health spending and health outcomes\nThe question of whether higher health expenditures lead to better health outcomes is a recurring theme in health economics. Spending is positively associated with outcomes in low- and middle-income countries, while the relationship is weaker in high-income settings (‚Äúplateau effect‚Äù). The United States and Switzerland are a well-known case: high spending with comparatively lower outcomes.\nFor this project, students worked with international data to examine three hypotheses:\n\nHigher health expenditures are associated with higher life expectancy.\nHigher health expenditures are associated with better perceived health status.\nThe marginal gains from health spending are smaller in high-income settings than in lower-income settings.\n\nStudents were guided through the technical steps to investigate these three hypotheses."
  },
  {
    "objectID": "posts/202601_health/blog.html#retrieving-data-through-apis",
    "href": "posts/202601_health/blog.html#retrieving-data-through-apis",
    "title": "Health expenditure and health outcomes",
    "section": "Retrieving data through APIs",
    "text": "Retrieving data through APIs\nBecause international economic analysis relies on reproducible data pulls, APIs are becoming standard tools in applied work. Students retrieved data on health expenditures from the World Bank API using API wrappers such as WDI in R, or by programming their own API wrapper. We focused on three indicators:\n\nCurrent health expenditure per capita (in current US$)\nCurrent health expenditure (% of GDP)\nCurrent health expenditure per capita, PPP (current international $)\n\nData on perceived health status was retrieved from the OECD API through the OECD package. Accessing data through APIs introduces students to reproducible workflows and avoids manual downloading. To support this part of the project, Minna Heim from the KOF Institute gave a guest lecture on working with APIs.\nEarly steps involved filtering out irrelevant observations (e.g., aggregates or gender-specific data) and standardising variable names and formats across datasets. Data cleaning is where the magic of data science often happens."
  },
  {
    "objectID": "posts/202601_health/blog.html#know-your-data",
    "href": "posts/202601_health/blog.html#know-your-data",
    "title": "Health expenditure and health outcomes",
    "section": "Know your data",
    "text": "Know your data\n\n‚ÄúTo not mislead others and not embarrass yourself, know your data‚Äù. (Jeremy G. Weber)\n\n\n\n\n\n\nWe emphasized the four basic questions to apply to a new dataset before going deeper into analysis. This part is inspired by Jeremy G. Weber‚Äôs ‚ÄúStatistics for Public Policy‚Äù, 2024.\n\nDefinitions: what exactly is being measured. Many economic indicators are constructed rather than natural facts (e.g.¬†poverty rates, unemployment, costs).\nUnits: in which quantities the variable is expressed (e.g.¬†liters or gallons, USD or PPP, per capita or totals, etc.). This also covers scale: percentages vs shares, per capita vs totals, logs vs levels.\nQuality and plausibility: spotting measures and values that are unrealistic or inconsistent with other data sources (e.g.¬†outliers).\nUnit of observation: what one observation represents (e.g.¬†country or country-year). This clarifies the relevant population and the level of analysis. Is the dataset a panel, a cross-section, a repeated cross-section, or a time series?\n\nThese points are relevant for this project. The choice between USD, PPP, or percentage of GDP for health expenditures affects interpretation, as do definitions of perceived health status. Students noticed how much interpretation depends on definitions, units, and the underlying data architecture."
  },
  {
    "objectID": "posts/202601_health/blog.html#merging-sources-and-exploring-the-data",
    "href": "posts/202601_health/blog.html#merging-sources-and-exploring-the-data",
    "title": "Health expenditure and health outcomes",
    "section": "Merging sources and exploring the data",
    "text": "Merging sources and exploring the data\nThe datasets were merged at the country-year level. This step raises practical questions about missing values, sample composition, and representativeness. World Bank variables merge well but contain missing values in some indicators. When adding OECD data, join choice affects the resulting sample. For example, an inner join restricts the sample to OECD countries, while a left or full join retains more information at the cost of missingness. These decisions influence the interpretation of results and illustrate the real-world challenges of working with data from different sources.\nThis part connected to concepts seen in the course: panel structures, join types, and handling missing data. It illustrated that empirical work in economics involves many decisions before any model is estimated."
  },
  {
    "objectID": "posts/202601_health/blog.html#measuring-health-expenditures",
    "href": "posts/202601_health/blog.html#measuring-health-expenditures",
    "title": "Health expenditure and health outcomes",
    "section": "Measuring health expenditures",
    "text": "Measuring health expenditures\nHealth expenditures can be expressed in different ways. In this project we explored three common indicators: expenditure per capita in USD, expenditure per capita in Purchasing-Power-Parity (PPP) terms, and expenditure as a share of GDP. These indicators do not tell the same story. USD reflects nominal spending power, PPP adjusts for differences in price levels, and the GDP share indicates how much of a country‚Äôs output is given to health care.\nFor cross-country comparisons, PPP is usually more informative because it accounts for cost-of-living differences. Using USD tends to exaggerate gaps between countries with different price levels, and the GDP share can look high in countries with smaller economies even when absolute health spending is low. This also affects interpretation of cases such as the United States, where high spending in USD and PPP terms coexists with lower outcomes.\n\n\n\n\n\nStudents were asked to look at expenditures in USD and as share of GDP, discuss observed trends, and compare indicators. We clearly saw a pattern of increasing per capita healthcare spending for high-income countries since 2000, whereas expenditures in countries in the lower income bracket increased slower. On average, high-income countries dedicated 8.1% of GDP for health in 2022."
  },
  {
    "objectID": "posts/202601_health/blog.html#measuring-health-outcomes-life-expectancy-and-perceived-health-status",
    "href": "posts/202601_health/blog.html#measuring-health-outcomes-life-expectancy-and-perceived-health-status",
    "title": "Health expenditure and health outcomes",
    "section": "Measuring health outcomes: life expectancy and perceived health status",
    "text": "Measuring health outcomes: life expectancy and perceived health status\nWe used two outcomes: life expectancy (from the World Bank) and perceived health status (from the OECD). Life expectancy is a widely used indicator of population health and correlates with many determinants of health. Perceived health status captures how individuals evaluate their own health and varies across countries for both health-related and cultural reasons. Students were asked to reflect on the advantages and disadvantages of using these measures as proxies for health quality.\nDifferences in perceived health status are informative but harder to compare across countries because reporting styles, expectations, and social norms influence responses. This makes it possible for two countries with similar health systems to display different levels of reported health.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLife expectancy is highly correlated with income brackets. We observe a Covid effect especially in middle income countries. Average perceived health status in OECD countries navigated between 65% and 70% since 2005, which is stable in comparison to increases in expenditures."
  },
  {
    "objectID": "posts/202601_health/blog.html#the-final-story-insights-and-visualization",
    "href": "posts/202601_health/blog.html#the-final-story-insights-and-visualization",
    "title": "Health expenditure and health outcomes",
    "section": "The final story: insights and visualization",
    "text": "The final story: insights and visualization\nThe relationship between expenditures and outcomes confirms the hypotheses. To answer our research question: yes, higher spending is associated with higher life expectancy, but the gains flatten at higher levels of spending (diminishing returns). This is particularly impressive for two outlier countries: Switzerland and the US.\n\n\n\n\n\nFor perceived health status, the association is weaker and only observable for OECD countries. Cultural and reporting differences play a larger role, and countries with similar levels of spending can report different levels of perceived health.\nAt the end of the project, students were asked to reflect and communicate their results through a short LinkedIn post. This forced them to translate an analytical workflow into a clear narrative for a broader audience.\nSome groups chose a more classic academic narrative (‚ÄúOur analysis examines how healthcare spending relates to population health across income groups.‚Äù), while others adopted a more polemic or provocative tone üòé (with titles like ‚Äúüí°The Wealth-Health Gap: Money Buys Years, But Only Up To A Point‚Äù, ‚ÄúWhat keeps people healthy longer ‚Äì money or something more?‚Äù, or ‚ÄúGreedy Big Pharma or drivers of longer lives? As ageing, long COVID and tight budgets strain health systems, one question matters: are we buying more health or just spending more money?‚Äù). The range of styles showed that data can support different narratives, as long as the underlying work is sound."
  },
  {
    "objectID": "posts/202601_health/blog.html#conclusion",
    "href": "posts/202601_health/blog.html#conclusion",
    "title": "Health expenditure and health outcomes",
    "section": "Conclusion",
    "text": "Conclusion\nThis project combines data handling with economic reasoning. Students worked with real data, used reproducible workflows, and examined how measurement choices affect conclusions. The exercise shows how data science and health economics meet in practice, and how young economists can now work with data in ways that lead to meaningful and interesting economic conclusions.\nAs the instructor, it was encouraging to see how quickly students could implement the full data pipeline and arrive at their own data-informed conclusions once they worked with real data. The way we teach data science has changed significantly in the past three years with the rise of large language models. Teaching data science and coding in 2025 is not the same as in 2022: in my experience, students are more effective at producing results with code, but less likely to understand every step in detail.\nThis project emphasised the understanding of each step while still enabling students to complete a full analysis. Only a few years ago, delivering such an end-to-end pipeline would have been unlikely at the bachelor level; today it has become achievable and rewarding for students üèÜüéØ‚úÖ."
  },
  {
    "objectID": "posts/202601_health/blog.html#acknowledgments",
    "href": "posts/202601_health/blog.html#acknowledgments",
    "title": "Health expenditure and health outcomes",
    "section": "Acknowledgments",
    "text": "Acknowledgments\nThis course was originally created by Ulrich Matter. I am grateful for the foundation he provided and have since taken over and further developed the course content. To Federica and Andrea for support in preparing, supporting students, and grading the project. To Minna Heim for taking time to inspire students and to prepare the lecture on APIs. To Matt Bannert for inspiration."
  },
  {
    "objectID": "posts/202601_health/blog.html#the-code",
    "href": "posts/202601_health/blog.html#the-code",
    "title": "Health expenditure and health outcomes",
    "section": "The code:",
    "text": "The code:\n\n\nShow R code\n# Code for the project 2025 and the blog post on health expenditure and outcomes\n# Author: Aur√©lien Sallin\n# Date: January 2026\n# This code is different than the one used for the official solution, because\n# it is adapted for the blog post.\n\n\n\n# CHAPTER 0 ---------------------------------\n\n# Load required libraries\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(summarytools)\nlibrary(ggplot2)\nlibrary(qs)\nlibrary(ggrepel)\nlibrary(WDI)\nlibrary(OECD)\n\n\n# Set flag to download and process data or read from cache\ndownload_and_process &lt;- TRUE\n\n# CHAPTER 1 ---------------------------------\n# Chapter 1: Search for health expenditure indicators,\n# Download and preprocess World Bank health data\n\n\n# Search for relevant indicators related to health expenditure from the World Bank database\nindicators &lt;- WDIsearch(\"health expenditure\")\nhead(indicators, 10)  # Display the first 10 results\n\n\nif(download_and_process) {\n\n  # Download and preprocess World Bank health data\n  df_WorldBank_health &lt;- WDI(\n    country = \"all\",\n    indicator = c(\n      \"ind_WorldBank_health_gdp\" = \"SH.XPD.CHEX.GD.ZS\",  # Health expenditure as % of GDP\n      \"ind_WorldBank_health_usd\" = \"SH.XPD.CHEX.PC.CD\",  # Health expenditure per capita (current US$)\n      \"ind_WorldBank_health_pp\" = \"SH.XPD.CHEX.PP.CD\",   # Health expenditure per capita (PPP)\n      \"ind_WorldBank_lifeexpectancy\" = \"SP.DYN.LE00.IN\"  # Life expectancy at birth (years)\n    ),\n    start = 2000,\n    end = 2024,\n    extra = TRUE\n  ) |&gt;\n    as_tibble()\n\n  # Remove aggregate regions from the dataset\n  df_WorldBank_health &lt;- df_WorldBank_health |&gt;\n    filter(region != \"Aggregates\")\n\n  # Select relevant variables and clean the dataset\n  df_WorldBank_health &lt;- df_WorldBank_health |&gt;\n    select(\n      iso3c, year, income, country,\n      ind_WorldBank_health_gdp, ind_WorldBank_health_usd, ind_WorldBank_health_pp, ind_WorldBank_lifeexpectancy) |&gt;\n    filter(iso3c != \"\") |&gt;\n    rename(\n      country = iso3c,\n      country_name = country\n    )\n\n  # Explore countries with NA: many are high income\n  na_table &lt;- df_WorldBank_health |&gt;\n    group_by(income, country_name, country) |&gt;\n    summarise(\n      number_years = n_distinct(year),\n      na_gdp = sum(is.na(ind_WorldBank_health_gdp)),\n      na_usd = sum(is.na(ind_WorldBank_health_usd)),\n      na_pp = sum(is.na(ind_WorldBank_health_pp)),\n      na_le = sum(is.na(ind_WorldBank_lifeexpectancy))\n    ) |&gt;\n    filter(na_gdp &gt; 0 | na_usd &gt; 0 | na_pp &gt; 0 | na_le &gt; 0)\n\n  na_table\n\n  # Save data in cache as .qs\n  qsave(df_WorldBank_health, \"Project_dh2025/data/wb_health.qs\")\n\n}\n\n\n# CHAPTER 3 ---------------------------------\n# Chapter 3: Download and preprocess OECD health status data\n# Perceived health status\n\nif (download_and_process) {\n\n  # Download and preprocess OECD health status data\n  dataset_id_phs &lt;- \"OECD.ELS.HD,DSD_HEALTH_STAT@DF_PHS,1.0\"\n\n  df_oecd_phs &lt;- get_dataset(\n    dataset_id_phs,\n    start_time = 2000,\n    end_time = 2024\n  )\n\n  # Filter for perceived health status\n  df_oecd_phs &lt;- df_oecd_phs |&gt;\n    filter(SEX == \"_T\") |&gt; # all genders\n    filter(AGE == \"Y_GE15\") |&gt; # aged 15 years old and over\n    filter(HEALTH_STATUS == \"G\") # who report their health to be ‚Äògood/very good' (or excellent)\n\n  # We also focus on non-defined Socio-econ status\n  df_oecd_phs &lt;- df_oecd_phs |&gt;\n    filter(SOCIO_ECON_STATUS == \"_Z\")\n\n  # Keep the relevant variables and values\n  df_oecd_phs &lt;- df_oecd_phs |&gt;\n    mutate(\n      TIME_PERIOD = as.integer(TIME_PERIOD),\n      ObsValue = as.numeric(ObsValue)\n    ) |&gt;\n    select(REF_AREA, TIME_PERIOD, ObsValue) |&gt;\n    rename(\n      country = REF_AREA,\n      year = TIME_PERIOD,\n      health_status_oecd = ObsValue\n    )\n\n  # Save data in cache\n  qsave(df_oecd_phs, \"Project_dh2025/data/oecd_phs.qs\")\n}\n\n\nif(!download_and_process) {\n  df_WorldBank_health &lt;- qread(\"Project_dh2025/data/wb_health.qs\")\n  df_oecd_phs &lt;- qread(\"Project_dh2025/data/oecd_phs.qs\")\n}\n\n\n\n\n# CHAPTER 4 ---------------------------------\n# Chapter 4: Merge World Bank and OECD datasets\n# Merge datasets\ndf_final &lt;- df_WorldBank_health |&gt;\n  full_join(df_oecd_phs, by = c(\"country\", \"year\"))\n\n# Transform income groups to factors:\nincome_groups &lt;- c(\"Low income\", \"Lower middle income\", \"Upper middle income\", \"High income\")\n\ndf_final &lt;- df_final |&gt;\n    mutate(income = factor(income, levels = income_groups))\n\n\n\n# CHAPTER 5 ---------------------------------\n# Chapter 5: Analyze and visualize health expenditure trends\ndf_final |&gt;\n  pivot_longer(\n    cols = c(\n      ind_WorldBank_health_gdp,\n      ind_WorldBank_health_usd,\n      ind_WorldBank_health_pp\n    ),\n    values_to = \"value\",\n    names_to = \"indicator\"\n  ) |&gt;\n  group_by(year, indicator) |&gt;\n  summarise(ind_year = mean(value, na.rm = TRUE), .groups = \"drop\") |&gt;\n  mutate(\n    # Transform GDP values to percentage for labeling\n    formatted_value = case_when(\n      indicator == \"ind_WorldBank_health_gdp\" ~ ind_year,\n      TRUE ~ ind_year\n    )\n  ) |&gt;\n  ggplot(aes(x = year, y = formatted_value, color = indicator)) +\n  geom_line(linewidth = 1.2) +\n  facet_wrap(\n    ~ indicator,\n    ncol = 1,\n    scales = \"free_y\",\n    labeller = labeller(\n      indicator = c(\n        ind_WorldBank_health_gdp = \"Health expenditure (% of GDP)\",\n        ind_WorldBank_health_usd = \"Health expenditure per capita (USD)\",\n        ind_WorldBank_health_pp  = \"Health expenditure per capita (PPP)\"\n      )\n    )\n  ) +\n  scale_color_manual(\n    values = c(\n      ind_WorldBank_health_gdp = \"#0072B2\",\n      ind_WorldBank_health_usd = \"#009E73\",\n      ind_WorldBank_health_pp  = \"#D55E00\"\n    ),\n    guide = \"none\"\n  ) +\n  scale_y_continuous(\n    labels = function(x) {\n      # Check if this is the GDP facet (smaller values) and add % signs\n      if (length(x) &gt; 0 && max(x, na.rm = TRUE) &lt; 15) {\n        paste0(round(x), \"%\")\n      } else {\n        as.character(round(x))\n      }\n    }\n  ) +\n  expand_limits(y = 0) +\n  labs(\n    title = \"Health expenditure over time\",\n    subtitle = \"Different measurement concepts shown separately\",\n    x = \"Year\",\n    y = NULL\n  ) +\n  theme_classic() +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_text(size = 11, angle = 0, hjust = 0, face = \"bold\"),\n    legend.position = \"bottom\",\n    plot.title = element_text(size = 14),\n    plot.subtitle = element_text(size = 11),\n    panel.grid.major.x = element_line(color = \"grey90\", linewidth = 0.3)\n  )\n\ndf_gdp &lt;- df_final |&gt;\n  filter(!is.na(income)) |&gt;\n  filter(year == 2022) |&gt;\n  select(year, country, income, ind_WorldBank_health_gdp) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_pp = mean(ind_WorldBank_health_gdp, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\n\n\n# Graph 1 for blog\n# Add group label and value at the end of each line (RHS), remove legend\ndf_plot &lt;- df_final |&gt;\n  filter(!is.na(income)) |&gt;\n  filter(year &gt;= 2000 & year &lt;= 2022) |&gt;\n  select(year, country, income, ind_WorldBank_health_pp) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_pp = mean(ind_WorldBank_health_pp, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(\n  df_plot,\n  aes(\n    x = year,\n    y = ind_WorldBank_health_pp,\n    color = income,\n    group = income\n  )\n) +\n  geom_line(linewidth = 1.1) +\n  # Use a friendly qualitative palette for income groups\n  scale_color_brewer(palette = \"Dark2\") +\n  # Label at the end (RHS) with group and value\n  geom_text(\n    data = group_by(df_plot, income) |&gt;\n      filter(year == 2022) |&gt;\n      mutate(vjust = if_else(income == \"Lower middle income\", -0.3, 0.5)),\n    aes(\n      label = paste0(income, \"\\n2022: \", round(ind_WorldBank_health_pp, 0)),\n      x = year + 0.5,\n      y = ind_WorldBank_health_pp,\n      color = income,\n      vjust = vjust\n    ),\n    hjust = 0,\n    size = 3.4,\n    fontface = \"bold\",\n    show.legend = FALSE\n  ) +\n  # Number at the start (LHS)\n  geom_text(\n    data = group_by(df_plot, income) |&gt;\n      filter(year == min(year)) |&gt;\n      mutate(vjust = if_else(income == \"Low income\", 0.6, 0.3)),\n    aes(\n      label = paste0(\"\", round(ind_WorldBank_health_pp, 0)),\n      x = year - 0.9,\n      y = ind_WorldBank_health_pp,\n      color = income,\n      vjust = vjust,\n    ),\n    hjust = 0,\n    size = 3.4,\n    fontface = \"bold\",\n    show.legend = FALSE\n  ) +\n  scale_y_continuous() +\n  scale_color_brewer(palette = \"Dark2\") +\n  # Ensure there is horizontal space for labels on the right and allow drawing outside panel\n  expand_limits(x = max(df_plot$year, na.rm = TRUE) + 1.5) +\n  coord_cartesian(clip = \"off\") +\n  labs(\n    subtitle = \"Income groups diverge in health spending: trends 2000-2022\",\n    title = \"High-income countries spend much more per person on health than others.\",\n    x = \"Year (2000-2022)\",\n    y = \"Health Expenditure per Capita (PPP)\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_classic() +\n  theme(\n    strip.background = element_blank(),\n    strip.text = element_text(size = 11, angle = 0, hjust = 0, face = \"bold\"),\n    legend.position = \"none\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 80, 5.5, 5.5) # increase right margin so RHS labels are visible\n  )\n\n# Save the faceted expenditure plot for the blog (wide, transparent PNG)\n# Assign plot to object and export\nggsave(\n  filename = \"Project_dh2025/figures/health_expenditure_time.png\",\n  plot = last_plot(),\n  width = 10,\n  height = 6,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n\n\n# Create data for income group analysis\ndata_income_groups &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    health_gdp = mean(ind_WorldBank_health_gdp, na.rm = TRUE),\n    health_pp = mean(ind_WorldBank_health_pp, na.rm = TRUE),\n    health_usd = mean(ind_WorldBank_health_usd, na.rm = TRUE),\n    .groups = \"drop\"\n  ) |&gt;\n  pivot_longer(\n    cols = c(health_gdp, health_usd, health_pp),\n    names_to = \"indicator\",\n    values_to = \"value\"\n  )\n\n\n\n# CHAPTER 6 ---------------------------------\n# Chapter 6: Analyze health expenditure statistics by income group\ndata_income_groups &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  filter(year &gt;= 2000 & year &lt;= 2022) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_health_gdp_mean = mean(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_gdp_sd = sd(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_gdp_coeffvar = sd(ind_WorldBank_health_gdp, na.rm = T)/mean(ind_WorldBank_health_gdp, na.rm = T),\n    ind_WorldBank_health_usd_mean = mean(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_usd_sd = sd(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_usd_coeffvar = sd(ind_WorldBank_health_usd, na.rm = T)/mean(ind_WorldBank_health_usd, na.rm = T),\n    ind_WorldBank_health_ppp_mean = mean(ind_WorldBank_health_pp, na.rm = T),\n    ind_WorldBank_health_ppp_sd = sd(ind_WorldBank_health_pp, na.rm = T),\n    ind_WorldBank_health_ppp_coeffvar = sd(ind_WorldBank_health_pp, na.rm = T)/mean(ind_WorldBank_health_usd, na.rm = T)\n    )\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_usd_mean, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Health expenditure per capita by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (current US$)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_gdp_mean, color = income)) +\n  geom_line(linewidth=1.2) +\n  labs(\n    title = \"Health expenditure (% of GDP) by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (% of GDP)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n# Plot expenditure by income group\ndata_income_groups |&gt;\n  ggplot(aes(x = year, y = ind_WorldBank_health_ppp_mean, color = income)) +\n  geom_line(linewidth = 1.2) +\n  labs(\n    title = \"Health expenditure per capita by income group\",\n    x = \"Year\",\n    y = \"Health expenditure per capita (PPP)\",\n    color = \"Income group\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_minimal()\n\n\n\n# CHAPTER 7 ---------------------------------\n# Chapter 7: Analyze and visualize life expectancy trends\n## Life expectancy by income group: styled for blog\n# Compute yearly averages by income group (2000-2022)\ndf_le_plot &lt;- df_final |&gt;\n  filter(income %in% income_groups) |&gt;\n  filter(year &gt;= 2000 & year &lt;= 2022) |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    ind_WorldBank_lifeexpectancy = mean(ind_WorldBank_lifeexpectancy, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(df_le_plot, aes(x = year, y = ind_WorldBank_lifeexpectancy, color = income, group = income)) +\n  geom_line(linewidth = 1) +\n  # RHS label with group name and 2022 value\n  geom_text(\n    data = df_le_plot %&gt;% group_by(income) %&gt;% filter(year == max(year)),\n    aes(\n      label = paste0(income, \"\\n2022: \", round(ind_WorldBank_lifeexpectancy, 1)),\n      x = year + 0.5\n    ),\n    hjust = 0,\n    vjust = 0.5,\n    size = 3.4,\n    fontface = \"bold\",\n    show.legend = FALSE\n  ) +\n  # LHS label with 2000 value\n  geom_text(\n    data = df_le_plot %&gt;% group_by(income) %&gt;% filter(year == min(year)),\n    aes(label = paste0(round(ind_WorldBank_lifeexpectancy, 1)),\n        x = year - 0.1),\n    hjust = 1, vjust = 0.5, size = 3.4, fontface = \"bold\", show.legend = FALSE\n  ) +\n  scale_y_continuous(limits = c(50, 81)) +\n  scale_color_brewer(palette = \"Dark2\") +\n  # allow labels outside plotting area and give room on the right\n  expand_limits(x = max(df_le_plot$year, na.rm = TRUE) + 1.5) +\n  coord_cartesian(clip = \"off\") +\n  labs(\n    subtitle = \"Life expectancy increased across all groups (2000‚Äì2022); lower-income groups saw faster gains.\",\n    title = \"Average life expectancy rose faster in lower-income groups, but gaps persist.\",\n    x = \"Year\",\n    y = \"Life expectancy at birth (years)\",\n    caption = \"Source: World Bank\"\n  ) +\n  theme_classic() +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 80, 5.5, 5.5)\n  )\n\n# Save life-expectancy plot as wide transparent PNG for blog\nggsave(\n  filename = \"Project_dh2025/figures/life_expectancy_income_groups.png\",\n  plot = last_plot(),\n  width = 8,\n  height = 6,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n\n\n# CHAPTER 8 ---------------------------------\n# Chapter 8: Analyze and visualize perceived health status trends\n# 2, Health status\n## OECD average perceived health status (styled for blog)\n# Compute OECD average by year (2000-2022)\ndf_oecd_status &lt;- df_final |&gt;\n  filter(!is.na(health_status_oecd)) |&gt;\n  filter(year &gt;= 2005 & year &lt;= 2022) |&gt;\n  group_by(year) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(df_oecd_status, aes(x = year, y = avg_health_status)) +\n  geom_line(size = 1.2, color = \"#0072B2\") +\n  scale_y_continuous(labels = scales::percent_format(accuracy = 1, scale = 1), lim = c(60, 75)) +\n  labs(\n    subtitle = \"Average perceived health status (OECD): 2005‚Äì2022\",\n    title = \"The share of respondents reporting 'good/very good' health \\nin high income countries increased slowly in the past 20 years.\",\n    x = \"Year\",\n    y = \"Share reporting good/very good health\",\n    caption = \"Source: OECD\"\n  ) +\n  theme_classic() +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 5.5, 5.5, 5.5)\n  )\n\n# Save OECD health-status plot as wide transparent PNG for blog\nggsave(\n  filename = \"Project_dh2025/figures/oecd_health_status_avg.png\",\n  plot = last_plot(),\n  width = 8,\n  height = 6,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n# Health status per income group\ndf_final |&gt;\n  group_by(year, income) |&gt;\n  summarise(\n    avg_health_status = mean(health_status_oecd, na.rm=TRUE)\n  ) |&gt;\n  ggplot(aes(x = year, y = avg_health_status, color = income)) +\n  geom_line(size=1.2) +\n  labs(\n    title = \"Average Health Status Over Time \",\n    x = \"Year\",\n    y = \"Share of people who report to be in good health\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"right\",\n    axis.text.x = element_text(angle=45, hjust=1)\n  )\n\n\n# CHAPTER 9 ---------------------------------\n# Chapter 9: Explore relationships between health expenditure and outcomes\n# Example: Visualizing the relationship between spending and outcomes\ndf_final |&gt;\n  filter(year == 2022) |&gt;\n  filter(country_name != \"Central African Republic\") |&gt; # remove outlier with very low spending and life expectancy\n  select(\n    income,\n    country,\n    country_name,\n    ind_WorldBank_health_usd,\n    ind_WorldBank_health_pp,\n    ind_WorldBank_lifeexpectancy\n  ) |&gt;\n  mutate(\n    label = if_else(\n      (ind_WorldBank_health_usd &gt;\n        quantile(ind_WorldBank_health_usd, 0.9, na.rm = T) |\n        ind_WorldBank_health_usd &lt;\n          quantile(ind_WorldBank_health_usd, 0.1, na.rm = T) |\n        ind_WorldBank_health_pp &gt;\n          quantile(ind_WorldBank_health_pp, 0.9, na.rm = T) |\n        ind_WorldBank_health_pp &lt;\n          quantile(ind_WorldBank_health_pp, 0.1, na.rm = T) |\n        ind_WorldBank_lifeexpectancy &lt;\n          quantile(ind_WorldBank_lifeexpectancy, 0.1, na.rm = T) |\n        ind_WorldBank_lifeexpectancy &gt;\n          quantile(ind_WorldBank_lifeexpectancy, 0.9, na.rm = T)) &\n        income %in% c(\"High income\"), # Ensure only OECD countries are labeled\n      country_name,\n      NA_character_\n    )\n  ) |&gt;\n  ggplot(aes(\n    y = ind_WorldBank_lifeexpectancy,\n    x = ind_WorldBank_health_pp\n  )) +\n  geom_point(alpha = 0.75, color = \"#0072B2\", size = 2.6) +\n  geom_smooth(\n    method = \"loess\",\n    se = FALSE,\n    color = \"grey40\",\n    linetype = \"dashed\"\n  ) +\n  scale_y_continuous(limits = c(0, 100)) +\n  # Label outliers but exclude US and Switzerland (they are highlighted separately)\n  geom_text_repel(\n    data = . %&gt;%\n      filter(\n        !is.na(label) & !(country_name %in% c(\"United States\", \"Switzerland\"))\n      ),\n    aes(label = label),\n    size = 3.1,\n    color = \"black\",\n    segment.color = \"grey70\",\n    box.padding = 0.35,\n    max.overlaps = 20\n  ) +\n  # Highlight US and Switzerland with red points\n  geom_point(\n    data = df_final %&gt;%\n      filter(\n        year == 2022 & country_name %in% c(\"United States\", \"Switzerland\")\n      ),\n    aes(x = ind_WorldBank_health_pp, y = ind_WorldBank_lifeexpectancy),\n    color = \"#D55E00\",\n    size = 3.6\n  ) +\n  # Highlight countries that illustrate the threshold effect\n  geom_text_repel(\n    data = df_final %&gt;%\n      filter(year == 2022, country_name %in% c(\"United States\", \"Switzerland\")),\n    aes(\n      x = ind_WorldBank_health_pp,\n      y = ind_WorldBank_lifeexpectancy,\n      label = country_name\n    ),\n    color = \"#D55E00\",\n    size = 3.8,\n    fontface = \"bold\",\n    nudge_x = 1,\n    segment.color = \"grey50\",\n    show.legend = FALSE\n  ) +\n  labs(\n    title = \"Twice the spending, same or lower life expectancy\",\n    subtitle = \"US and Switzerland spend about twice as much on health (PPP per capita, 2022) as other OECD countries with similar life expectancy\",\n    x = \"Health expenditure per capita (PPP)\",\n    y = \"Life Expectancy at Birth (years)\",\n    caption = \"Spending shown in PPP per capita (purchasing power parity: adjusted for price-level differences). Outliers labeled. Source: World Bank, 2022.\"\n  ) +\n  theme_classic() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 11, color = \"grey30\"),\n    panel.grid.major.y = element_line(color = \"grey90\", linewidth = 0.3),\n    plot.margin = margin(5.5, 5.5, 5.5, 5.5)\n  )\n\n# Save scatter for blog (wide transparent PNG)\nggsave(\n  filename = \"Project_dh2025/figures/spending_vs_life_2022.png\",\n  plot = last_plot(),\n  width = 12,\n  height = 8,\n  units = \"in\",\n  dpi = 300,\n  bg = \"transparent\"\n)\n\n\n# Example: Comparing perceived health status\ndf_final |&gt;\n  #filter(year == 2019) |&gt;\n  ggplot(aes(x = ind_WorldBank_health_pp, y = health_status_oecd)) +\n  geom_point() +\n  labs(\n    title = \"Perceived Health Status by Country\",\n    x = \"Healthcare Spending per Capita (PP)\",\n    y = \"Perceived Health Status (%)\"\n  )\n\n\n# End of code"
  },
  {
    "objectID": "posts/202510_vitd/blog.html",
    "href": "posts/202510_vitd/blog.html",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "",
    "text": "library(ggplot2)\nlibrary(dplyr)\nlibrary(readr)\nlibrary(qs)\n\ndataGraph &lt;- qread(\"data/dataGraph.qs\")\ndfgraph &lt;- dataGraph$dfGraph_long\ncounterfactualM &lt;- dataGraph$counterfactual_long\nout &lt;- dataGraph$out\ndfgraph &lt;- rename(dfgraph, \"y\" = y1_)\n\nplot_vitd_masked &lt;- function(\n    dfgraph,\n    counterfactualM,\n    mask_from = NULL,\n    mask_counterfactual_from = NULL,\n    x = 0.8\n) {\n    # Filter data based on mask_from parameter instead of using rectangles\n    dfgraph_filtered &lt;- if (!is.null(mask_from)) {\n        subset(dfgraph, time &lt;= mask_from)\n    } else {\n        dfgraph\n    }\n\n    # Create counterfactual dataframe\n    counterfactual_df &lt;- data.frame(\n        time = dfgraph$time,\n        counterfactual = counterfactualM\n    )\n\n    # Filter counterfactual data if needed\n    if (!is.null(mask_counterfactual_from)) {\n        counterfactual_df &lt;- subset(counterfactual_df, time &lt;= mask_counterfactual_from)\n    }\n\n    # Filter counterfactual by mask_from as well\n    if (!is.null(mask_from)) {\n        counterfactual_df &lt;- subset(counterfactual_df, time &lt;= mask_from)\n    }\n\n    p &lt;- ggplot(dfgraph, aes(y = y * 100, x = time)) +\n        geom_line(\n            data = dfgraph_filtered,\n            aes(\n                color = \"Observed\",\n                size = \"Observed\",\n                linetype = \"Observed\"\n            )\n        ) +\n        geom_line(\n            data = counterfactual_df,\n            aes(\n                y = counterfactual * 100,\n                color = \"Counterfactual\",\n                size = \"Counterfactual\",\n                linetype = \"Counterfactual\"\n            )\n        ) +\n        geom_line(\n            data = subset(dfgraph_filtered, time &lt;= 0),\n            aes(\n                y = pred * 100,\n                color = \"Predicted\",\n                size = \"Predicted\",\n                linetype = \"Predicted\"\n            )\n        ) +\n        geom_line(\n            data = subset(dfgraph_filtered, time &gt;= 0),\n            aes(\n                y = pred * 100,\n                color = \"Predicted\",\n                size = \"Predicted\",\n                linetype = \"Predicted\"\n            )\n        ) +\n\n        scale_linetype_manual(\n            name = \"\",\n            values = c(\"Observed\" = 1, \"Predicted\" = 1, \"Counterfactual\" = 4)\n        ) +\n        scale_size_manual(\n            name = \"\",\n            values = c(\n                \"Observed\" = x * 0.8,\n                \"Predicted\" = x * 1,\n                \"Counterfactual\" = x * 1.25\n            )\n        ) +\n        scale_color_manual(\n            name = \"\",\n            values = c(\n                \"Observed\" = \"grey40\",\n                \"Predicted\" = \"#E22920\",\n                \"Counterfactual\" = \"#01BBA8\"\n            )\n        ) +\n        scale_x_continuous(\n            limits = c(-50, 18),\n            breaks = c(-50, -39, -27, -15, -3, 0, 9, 15, 21) - 15,\n            labels = c(\n                \"Jan.\\n2017\",\n                \"Jan.\\n2018\",\n                \"Jan.\\n2019\",\n                \"Jan.\\n2020\",\n                \"Jan.\\n2021\",\n                \"Apr.\\n2021\",\n                \"Jan.\\n2022\",\n                \"Jun.\\n2022\",\n                \"Jan.\\n2023\"\n            )\n        ) +\n        scale_y_continuous(\n            limits = c(1.5, 7),\n            breaks = seq(2, 7, 1)\n        ) +\n        annotate(\n            \"rect\",\n            xmin = -28,\n            xmax = -24,\n            ymin = -Inf,\n            ymax = Inf,\n            alpha = 0.1,\n            fill = \"#00857C\"\n        ) +\n        geom_text(\n            aes(x = -26, y = 1.8, label = \"COVID19 \\nLockdown\"),\n            color = \"#00857C\",\n            size = x * 3\n        ) +\n        labs(\n            y = \"Monthly Vitamin D test prescriptions per 100 consultations\",\n            x = NULL\n        ) +\n        theme_classic() +\n        theme(\n            plot.background = element_rect(fill = \"#F5F5F5\", color = NA),\n            panel.background = element_rect(fill = \"#F5F5F5\", color = NA),\n            legend.background = element_rect(fill = \"#EEEEEE\"),\n            legend.position = \"bottom\",\n            panel.grid.major.x = element_line(color = \"white\"),\n            panel.grid.major.y = element_line(color = \"white\"),\n            axis.text.x = element_text(size = x * 10),\n            axis.text.y = element_text(size = x * 10),\n            axis.title = element_text(size = x * 11),\n            legend.text = element_text(size = x * 10)\n        )\n\n    # Add vertical lines conditionally based on data support\n    # Only add vline if the x-intercept is within the data range (mask_from)\n    if (is.null(mask_from) || mask_from &gt;= -15) {\n        p &lt;- p + geom_vline(\n            xintercept = -15,\n            color = \"#E22920\",\n            lty = 20,\n            linewidth = x * 1.5\n        )\n    }\n\n    if (is.null(mask_from) || mask_from &gt;= 0) {\n        p &lt;- p + geom_vline(\n            xintercept = 0,\n            color = \"#675482\",\n            lty = 20,\n            linewidth = x * 1.5\n        )\n    }\n\n    p\n}\nOur Research Question: How can healthcare systems effectively reduce low-value care that wastes millions in resources?\nOur Natural Experiment: Switzerland tried two different approaches in the case of prescription of Vitamin D tests: clinical guidelines vs.¬†financial restrictions. We tracked what actually happened to the number of prescriptions.\nThe Results? üëá Scroll to see the story unfold‚Ä¶\nüìñ Full Study: The impact of Choosing WiselyTM recommendations and insurance coverage restrictions on the provision of low-value care: an interrupted time series analysis of vitamin D tests (Sallin et al. 2025)"
  },
  {
    "objectID": "posts/202510_vitd/blog.html#a-policy-response",
    "href": "posts/202510_vitd/blog.html#a-policy-response",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "A Policy Response",
    "text": "A Policy Response\nThis increase led to several policy measures. In April 2021, the Smarter Medicine initiative, which is the Swiss equivalent of Choosing Wisely‚Ñ¢, included vitamin D testing in its list of procedures to avoid. The recommendation was simple: no routine measurement of 25(OH)-Vitamin D in patients without risk factors. Physicians were informed of these measures.\nA year later, the Federal Office of Public Health introduced a coverage restriction (limitatio), limiting reimbursement for such tests. Together, these steps offered a natural experiment to observe how clinical recommendations and financial incentives influence medical practice."
  },
  {
    "objectID": "posts/202510_vitd/blog.html#using-real-world-data-to-evaluate-the-effect",
    "href": "posts/202510_vitd/blog.html#using-real-world-data-to-evaluate-the-effect",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "Using Real-World Data to Evaluate the Effect",
    "text": "Using Real-World Data to Evaluate the Effect\nTo examine these changes, we analyzed mandatory health insurance claims data from SWICA, covering about 10% of the Swiss population. The data include more than 3‚Äô600 general practitioners and group practices, with adult patients who had at least one consultation between 2018 and 2023.\nWe applied interrupted time-series analysis to estimate how testing volumes evolved around the two interventions. The method compares observed data with a counterfactual trend, which shows what we would expect if the interventions had not taken place.\nThe models account for patient characteristics, clinical indications for testing based on Swiss guidelines, and physician-specific prescribing behavior. This allows us to isolate the effect of the policy interventions from broader temporal or compositional changes."
  },
  {
    "objectID": "posts/202510_vitd/blog.html#a-multi-disciplinary-collaboration",
    "href": "posts/202510_vitd/blog.html#a-multi-disciplinary-collaboration",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "A Multi-Disciplinary Collaboration",
    "text": "A Multi-Disciplinary Collaboration\nThis study is the result of a productive collaboration between the health services research team at SWICA, physicians at the Institute of Primary Care of the University of Z√ºrich, and health economists at the Institute of Health Economics and Health Policy of the Bern University of Applied Sciences.\nThis collaboration demonstrates how insights from claims data can advance our understanding of the healthcare system and inform policy decisions aimed at reducing costs for the Swiss population."
  },
  {
    "objectID": "posts/202510_vitd/blog.html#the-results-in-one-scroll",
    "href": "posts/202510_vitd/blog.html#the-results-in-one-scroll",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "The results in one scroll",
    "text": "The results in one scroll\n\n\nReading the Chart: What Are We Looking At?\n‚óè‚óè‚óè Grey line = Actual vitamin D tests prescribed each month (real SWICA data)\n‚óè‚óè‚óè Red line = What our statistical model predicts should happen\n‚ñ¨‚ñ¨‚ñ¨ Green box = COVID-19 lockdown period (March-April 2020)\nWhy this matters: The red and grey lines track closely together, showing our model accurately captures normal prescribing patterns. This means we can detect when policies actually change physician behavior.\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -16)\n\n\n\n\n\n\n\n\n\n\nVitamin D Test Prescriptions Rose Despite Low-Value Status\nDespite clear evidence of low clinical value, vitamin D test prescriptions rose by 20% between 2018 and 2021.\nA textbook example of low-value care in the healthcare system (see also Obsan 2023).\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -16)\n\n\n\n\n\n\n\n\n\n\nApril 2021: Smarter Medicine Takes Action\nSwitzerland‚Äôs Choosing Wisely‚Ñ¢ campaign places vitamin D testing on their ‚ÄúTop 5‚Äù list of unnecessary procedures.\n\n\n\n\n\nClear message: ‚ÄúNo routine testing for patients without risk factors.‚Äù\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -15)\n\n\n\n\n\n\n\n\n\n\nClinical Recommendations: Modest Impact\nThe Smarter Medicine recommendation shows a slight downward trend.\nBut is this enough? Let‚Äôs compare with what would have happened without intervention‚Ä¶\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = -15)\n\n\n\n\n\n\n\n\n\n\nRevealing the Counterfactual\nThe teal dashed line shows what would have happened without the recommendation.\nTesting rates would have continued climbing upward.\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = 0)\n\n\n\n\n\n\n\n\n\n\nThe Numbers: Clinical Recommendations Work, But Modestly\nWe conduct statistical tests to see whether the recommendation led to a recognizable pattern. The number of tests per consultation falls by 5.98% in the 12‚Äâmonths following the recommendation.\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = 0)\n\n\n\n\n\n\n\n\n\n\nJuly 2022: Strong Regulatory Measure\n\n\nThe Federal Office of Public Health restricts coverage. Patients now pay out-of-pocket for routine tests.\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = 0)\n\n\n\n\n\n\n\n\n\n\nFinancial Incentives: The Game Changer\nThe number of tests per consultation drops by 57.82% in the 6 months following the coverage restriction. This is a dramatic drop compared to clinical recommendations alone.\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = NULL)\n\n\n\n\n\n\n\n\n\n\nThe Bottom Line: 15.65 Million CHF Saved\nHealthcare system savings of 15.65 million CHF in 2022 alone.\nThat‚Äôs 1.8 CHF per Swiss resident.\n\n\n\nplot_vitd_masked(dfgraph, counterfactualM, mask_from = NULL)"
  },
  {
    "objectID": "posts/202510_vitd/blog.html#key-findings-and-policy-implications",
    "href": "posts/202510_vitd/blog.html#key-findings-and-policy-implications",
    "title": "Guidelines vs.¬†Financial Incentives Against Low-Value Care: Which Policy Tool Actually Changes Physician Behavior?",
    "section": "Key Findings and Policy Implications",
    "text": "Key Findings and Policy Implications\nClinical recommendations alone proved less effective than government regulation in reducing low-value care in Switzerland. However, our analysis revealed important nuances.\nWe found no unintended consequences from the coverage limitation: vitamin D supplementation rates remained unaffected, suggesting the policy successfully targeted testing without compromising appropriate treatment.\nHowever, from a health policy perspective, simply removing procedures from basic insurance coverage cannot be the default solution for addressing unnecessary treatments. This regulatory approach creates high administrative burden for physicians.\nA more sustainable solution lies in strengthening financial incentives that align provider and payer interests. In Switzerland, this can be achieved through managed care contracts between physician networks and health insurers within alternative insurance models. These contracts establish quality standards while creating shared financial responsibility among physicians‚Äîencouraging appropriate care delivery without heavy-handed regulation."
  }
]